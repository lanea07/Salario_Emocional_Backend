"use strict";(self.webpackChunksalarioemocionalfrontend=self.webpackChunksalarioemocionalfrontend||[]).push([[70],{2070:(Jt,P,h)=>{h.r(P),h.d(P,{BenefitEmployeeModule:()=>qt});var v=h(4755),p=h(9401),y=h(1585),me=h(5770),B=h(9541),w=h(9089),T=h(5118),he=h(5226),g=h.n(he),e=h(2223);let W=(()=>{class n{transform(t){return t.reduce((a,s)=>a+s.benefit_detail.time_hours,0),t?t.reduce((a,s)=>a+s.benefit_detail.time_hours,0):0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"sum",type:n,pure:!0}),n})();var _=h(206),O=h(6518),G=h(1239),Z=h(3144),pe=h(2340);let M=(()=>{class n{constructor(t){this.http=t,this.apiBaseUrl=pe.N.apiBaseUrl,this.token=localStorage.getItem("token")}index(t,i){const a=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(`${this.apiBaseUrl}/benefituser?userId=${t}&year=${i}`,{headers:a,withCredentials:!0})}show(t){const i=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(`${this.apiBaseUrl}/benefituser/${t}`,{headers:i,withCredentials:!0})}create(t){const i=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.post(`${this.apiBaseUrl}/benefituser`,t,{headers:i,withCredentials:!0})}update(t,i){const a=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.put(`${this.apiBaseUrl}/benefituser/${t}`,i,{headers:a,withCredentials:!0})}destroy(t){const i=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.delete(`${this.apiBaseUrl}/benefituser/${t}`,{headers:i,withCredentials:!0})}downloadReport(t){const i=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.post(`${this.apiBaseUrl}/exportbenefits`,t,{headers:i,withCredentials:!0})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var L=h(427),f=h(1086),R=h(5743),z=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var n=window.screen;if(n)return(n.deviceXDPI||1)/(n.logicalXDPI||1)}return 1}(),S_textSize=function(n,r,t){var l,i=[].concat(r),a=i.length,s=n.font,o=0;for(n.font=t.string,l=0;l<a;++l)o=Math.max(n.measureText(i[l]).width,o);return n.font=s,{height:a*t.lineHeight,width:o}};function Y(n,r){var t=r.x,i=r.y;if(null===t)return{x:0,y:-1};if(null===i)return{x:1,y:0};var a=n.x-t,s=n.y-i,o=Math.sqrt(a*a+s*s);return{x:o?a/o:0,y:o?s/o:-1}}var _e=0,K=1,X=2,ee=4,te=8;function E(n,r,t){var i=_e;return n<t.left?i|=K:n>t.right&&(i|=X),r<t.top?i|=te:r>t.bottom&&(i|=ee),i}function N(n,r){var a,s,t=r.anchor,i=n;return r.clamp&&(i=function ge(n,r){for(var u,d,c,t=n.x0,i=n.y0,a=n.x1,s=n.y1,o=E(t,i,r),l=E(a,s,r);o|l&&!(o&l);)(u=o||l)&te?(d=t+(a-t)*(r.top-i)/(s-i),c=r.top):u&ee?(d=t+(a-t)*(r.bottom-i)/(s-i),c=r.bottom):u&X?(c=i+(s-i)*(r.right-t)/(a-t),d=r.right):u&K&&(c=i+(s-i)*(r.left-t)/(a-t),d=r.left),u===o?o=E(t=d,i=c,r):l=E(a=d,s=c,r);return{x0:t,x1:a,y0:i,y1:s}}(i,r.area)),"start"===t?(a=i.x0,s=i.y0):"end"===t?(a=i.x1,s=i.y1):(a=(i.x0+i.x1)/2,s=(i.y0+i.y1)/2),function ve(n,r,t,i,a){switch(a){case"center":t=i=0;break;case"bottom":t=0,i=1;break;case"right":t=1,i=0;break;case"left":t=-1,i=0;break;case"top":t=0,i=-1;break;case"start":t=-t,i=-i;break;case"end":break;default:a*=Math.PI/180,t=Math.cos(a),i=Math.sin(a)}return{x:n,y:r,vx:t,vy:i}}(a,s,n.vx,n.vy,r.align)}var q={arc:function(n,r){var t=(n.startAngle+n.endAngle)/2,i=Math.cos(t),a=Math.sin(t),s=n.innerRadius,o=n.outerRadius;return N({x0:n.x+i*s,y0:n.y+a*s,x1:n.x+i*o,y1:n.y+a*o,vx:i,vy:a},r)},point:function(n,r){var t=Y(n,r.origin),i=t.x*n.options.radius,a=t.y*n.options.radius;return N({x0:n.x-i,y0:n.y-a,x1:n.x+i,y1:n.y+a,vx:t.x,vy:t.y},r)},bar:function(n,r){var t=Y(n,r.origin),i=n.x,a=n.y,s=0,o=0;return n.horizontal?(i=Math.min(n.x,n.base),s=Math.abs(n.base-n.x)):(a=Math.min(n.y,n.base),o=Math.abs(n.base-n.y)),N({x0:i,y0:a+o,x1:i+s,y1:a,vx:t.x,vy:t.y},r)},fallback:function(n,r){var t=Y(n,r.origin);return N({x0:n.x,y0:n.y,x1:n.x+(n.width||0),y1:n.y+(n.height||0),vx:t.x,vy:t.y},r)}},x=function(n){return Math.round(n*z)/z};function Ce(n,r){var t=r.chart.getDatasetMeta(r.datasetIndex).vScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var i=t.getBasePixel();return n.horizontal?{x:i,y:null}:{x:null,y:i}}function ye(n){return n instanceof R.qi?q.arc:n instanceof R.od?q.point:n instanceof R.ZL?q.bar:q.fallback}function Ze(n,r,t){var i=n.shadowBlur,a=t.stroked,s=x(t.x),o=x(t.y),l=x(t.w);a&&n.strokeText(r,s,o,l),t.filled&&(i&&a&&(n.shadowBlur=0),n.fillText(r,s,o,l),i&&a&&(n.shadowBlur=i))}var ie=function(n,r,t,i){var a=this;a._config=n,a._index=i,a._model=null,a._rects=null,a._ctx=r,a._el=t};(0,f.a4)(ie.prototype,{_modelize:function(n,r,t,i){var a=this,s=a._index,o=(0,f.a0)((0,f.a)([t.font,{}],i,s)),l=(0,f.a)([t.color,f.d.color],i,s);return{align:(0,f.a)([t.align,"center"],i,s),anchor:(0,f.a)([t.anchor,"center"],i,s),area:i.chart.chartArea,backgroundColor:(0,f.a)([t.backgroundColor,null],i,s),borderColor:(0,f.a)([t.borderColor,null],i,s),borderRadius:(0,f.a)([t.borderRadius,0],i,s),borderWidth:(0,f.a)([t.borderWidth,0],i,s),clamp:(0,f.a)([t.clamp,!1],i,s),clip:(0,f.a)([t.clip,!1],i,s),color:l,display:n,font:o,lines:r,offset:(0,f.a)([t.offset,4],i,s),opacity:(0,f.a)([t.opacity,1],i,s),origin:Ce(a._el,i),padding:(0,f.E)((0,f.a)([t.padding,4],i,s)),positioner:ye(a._el),rotation:(0,f.a)([t.rotation,0],i,s)*(Math.PI/180),size:S_textSize(a._ctx,r,o),textAlign:(0,f.a)([t.textAlign,"start"],i,s),textShadowBlur:(0,f.a)([t.textShadowBlur,0],i,s),textShadowColor:(0,f.a)([t.textShadowColor,l],i,s),textStrokeColor:(0,f.a)([t.textStrokeColor,l],i,s),textStrokeWidth:(0,f.a)([t.textStrokeWidth,0],i,s)}},update:function(n){var o,l,u,r=this,t=null,i=null,a=r._index,s=r._config,d=(0,f.a)([s.display,!0],n,a);d&&(l=(0,f.v)((0,f.Q)(s.formatter,[o=n.dataset.data[a],n]),o),(u=(0,f.k)(l)?[]:function(n){var t,r=[];for(n=[].concat(n);n.length;)"string"==typeof(t=n.pop())?r.unshift.apply(r,t.split("\n")):Array.isArray(t)?n.push.apply(n,t):(0,f.k)(n)||r.unshift(""+t);return r}(l)).length&&(i=function be(n){var r=n.borderWidth||0,t=n.padding,i=n.size.height,a=n.size.width,s=-a/2,o=-i/2;return{frame:{x:s-t.left-r,y:o-t.top-r,w:a+t.width+2*r,h:i+t.height+2*r},text:{x:s,y:o,w:a,h:i}}}(t=r._modelize(d,u,s,n)))),r._model=t,r._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(n,r){var o,i=n.ctx,a=this._model,s=this._rects;this.visible()&&(i.save(),a.clip&&(o=a.area,i.beginPath(),i.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),i.clip()),i.globalAlpha=function(n,r,t){return Math.max(n,Math.min(r,t))}(0,a.opacity,1),i.translate(x(r.x),x(r.y)),i.rotate(a.rotation),function xe(n,r,t){var i=t.backgroundColor,a=t.borderColor,s=t.borderWidth;!i&&(!a||!s)||(n.beginPath(),function we(n,r,t,i,a,s){var o=Math.PI/2;if(s){var l=Math.min(s,a/2,i/2),u=r+l,d=t+l,c=r+i-l,m=t+a-l;n.moveTo(r,d),u<c&&d<m?(n.arc(u,d,l,-Math.PI,-o),n.arc(c,d,l,-o,0),n.arc(c,m,l,0,o),n.arc(u,m,l,o,Math.PI)):u<c?(n.moveTo(u,t),n.arc(c,d,l,-o,o),n.arc(u,d,l,o,Math.PI+o)):d<m?(n.arc(u,d,l,-Math.PI,0),n.arc(u,m,l,0,Math.PI)):n.arc(u,d,l,-Math.PI,Math.PI),n.closePath(),n.moveTo(r,t)}else n.rect(r,t,i,a)}(n,x(r.x)+s/2,x(r.y)+s/2,x(r.w)-s,x(r.h)-s,t.borderRadius),n.closePath(),i&&(n.fillStyle=i,n.fill()),a&&s&&(n.strokeStyle=a,n.lineWidth=s,n.lineJoin="miter",n.stroke()))}(i,s.frame,a),function Ue(n,r,t,i){var C,a=i.textAlign,s=i.color,o=!!s,l=i.font,u=r.length,d=i.textStrokeColor,c=i.textStrokeWidth,m=d&&c;if(u&&(o||m))for(t=function Te(n,r,t){var i=t.lineHeight,a=n.w,s=n.x;return"center"===r?s+=a/2:("end"===r||"right"===r)&&(s+=a),{h:i,w:a,x:s,y:n.y+i/2}}(t,a,l),n.font=l.string,n.textAlign=a,n.textBaseline="middle",n.shadowBlur=i.textShadowBlur,n.shadowColor=i.textShadowColor,o&&(n.fillStyle=s),m&&(n.lineJoin="round",n.lineWidth=c,n.strokeStyle=d),C=0,u=r.length;C<u;++C)Ze(n,r[C],{stroked:m,filled:o,w:t.w,x:t.x,y:t.y+t.h*C})}(i,a.lines,s.text,a),i.restore())}});var Ae=Number.MIN_SAFE_INTEGER||-9007199254740991,Be=Number.MAX_SAFE_INTEGER||9007199254740991;function D(n,r,t){var i=Math.cos(t),a=Math.sin(t),s=r.x,o=r.y;return{x:s+i*(n.x-s)-a*(n.y-o),y:o+a*(n.x-s)+i*(n.y-o)}}function ne(n,r){var s,o,d,t=Be,i=Ae,a=r.origin;for(s=0;s<n.length;++s)d=r.vx*((o=n[s]).x-a.x)+r.vy*(o.y-a.y),t=Math.min(t,d),i=Math.max(i,d);return{min:t,max:i}}function F(n,r){var t=r.x-n.x,i=r.y-n.y,a=Math.sqrt(t*t+i*i);return{vx:(r.x-n.x)/a,vy:(r.y-n.y)/a,origin:n,ln:a}}var re=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function ae(n,r,t){var i=r.positioner(n,r),a=i.vx,s=i.vy;if(!a&&!s)return{x:i.x,y:i.y};var o=t.w,l=t.h,u=r.rotation,d=Math.abs(o/2*Math.cos(u))+Math.abs(l/2*Math.sin(u)),c=Math.abs(o/2*Math.sin(u))+Math.abs(l/2*Math.cos(u)),m=1/Math.max(Math.abs(a),Math.abs(s));return d*=a*m,c*=s*m,{x:i.x+(d+=r.offset*a),y:i.y+(c+=r.offset*s)}}(0,f.a4)(re.prototype,{center:function(){var n=this._rect;return{x:n.x+n.w/2,y:n.y+n.h/2}},update:function(n,r,t){this._rotation=t,this._rect={x:r.x+n.x,y:r.y+n.y,w:r.w,h:r.h}},contains:function(n){var r=this,i=r._rect;return!((n=D(n,r.center(),-r._rotation)).x<i.x-1||n.y<i.y-1||n.x>i.x+i.w+2||n.y>i.y+i.h+2)},intersects:function(n){var a,s,o,r=this._points(),t=n._points(),i=[F(r[0],r[1]),F(r[0],r[3])];for(this._rotation!==n._rotation&&i.push(F(t[0],t[1]),F(t[0],t[3])),a=0;a<i.length;++a)if(s=ne(r,i[a]),o=ne(t,i[a]),s.max<o.min||o.max<s.min)return!1;return!0},_points:function(){var n=this,r=n._rect,t=n._rotation,i=n.center();return[D({x:r.x,y:r.y},i,t),D({x:r.x+r.w,y:r.y},i,t),D({x:r.x+r.w,y:r.y+r.h},i,t),D({x:r.x,y:r.y+r.h},i,t)]}});var I={prepare:function(n){var t,i,a,s,o,r=[];for(t=0,a=n.length;t<a;++t)for(i=0,s=n[t].length;i<s;++i)r.push(o=n[t][i]),o.$layout={_box:new re,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return r.sort(function(l,u){var d=l.$layout,c=u.$layout;return d._idx===c._idx?c._set-d._set:c._idx-d._idx}),this.update(r),r},update:function(n){var t,i,a,s,o,r=!1;for(t=0,i=n.length;t<i;++t)s=(a=n[t]).model(),(o=a.$layout)._hidable=s&&"auto"===s.display,o._visible=a.visible(),r|=o._hidable;r&&function De(n){var r,t,i,a,s,o,l;for(r=0,t=n.length;r<t;++r)(a=(i=n[r]).$layout)._visible&&(l=new Proxy(i._el,{get:(u,d)=>u.getProps([d],!0)[d]}),s=i.geometry(),o=ae(l,i.model(),s),a._box.update(o,s,i.rotation()));(function Se(n,r){var t,i,a,s;for(t=n.length-1;t>=0;--t)for(a=n[t].$layout,i=t-1;i>=0&&a._visible;--i)(s=n[i].$layout)._visible&&a._box.intersects(s._box)&&r(a,s)})(n,function(u,d){var c=u._hidable,m=d._hidable;c&&m||m?d._visible=!1:c&&(u._visible=!1)})}(n)},lookup:function(n,r){var t,i;for(t=n.length-1;t>=0;--t)if((i=n[t].$layout)&&i._visible&&i._box.contains(r))return n[t];return null},draw:function(n,r){var t,i,a,s,o,l;for(t=0,i=r.length;t<i;++t)(s=(a=r[t]).$layout)._visible&&(o=a.geometry(),l=ae(a._el,a.model(),o),s._box.update(l,o,a.rotation()),a.draw(n,l))}},b="$datalabels",se="$default";function Q(n,r,t,i){if(r){var o,a=t.$context,s=t.$groups;r[s._set]&&(o=r[s._set][s._key])&&!0===(0,f.Q)(o,[a,i])&&(n[b]._dirty=!0,t.update(a))}}var Fe={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(n){if((0,f.k)(n))return null;var t,i,a,r=n;if((0,f.i)(n))if((0,f.k)(n.label))if((0,f.k)(n.r))for(r="",a=0,i=(t=Object.keys(n)).length;a<i;++a)r+=(0!==a?", ":"")+t[a]+": "+n[t[a]];else r=n.r;else r=n.label;return""+r},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(n){n[b]={_actives:[]}},beforeUpdate:function(n){var r=n[b];r._listened=!1,r._listeners={},r._datasets=[],r._labels=[]},afterDatasetUpdate:function(n,r,t){var m,C,ue,ce,j,fe,A,U,i=r.index,a=n[b],s=a._datasets[i]=[],o=n.isDatasetVisible(i),l=n.data.datasets[i],u=function Me(n,r){var s,o,t=n.datalabels,i={},a=[];return!1===t?null:(!0===t&&(t={}),r=(0,f.a4)({},[r,t]),s=r.labels||{},o=Object.keys(s),delete r.labels,o.length?o.forEach(function(l){s[l]&&a.push((0,f.a4)({},[r,s[l],{_key:l}]))}):a.push(r),i=a.reduce(function(l,u){return(0,f.F)(u.listeners||{},function(d,c){l[c]=l[c]||{},l[c][u._key||se]=d}),delete u.listeners,l},{}),{labels:a,listeners:i})}(l,t),d=r.meta.data||[],c=n.ctx;for(c.save(),m=0,ue=d.length;m<ue;++m)if((A=d[m])[b]=[],o&&A&&n.getDataVisibility(m)&&!A.skip)for(C=0,ce=u.labels.length;C<ce;++C)fe=(j=u.labels[C])._key,(U=new ie(j,c,A,m)).$groups={_set:i,_key:fe||se},U.$context={active:!1,chart:n,dataIndex:m,dataset:l,datasetIndex:i},U.update(U.$context),A[b].push(U),s.push(U);c.restore(),(0,f.a4)(a._listeners,u.listeners,{merger:function(J,V,Ft){V[J]=V[J]||{},V[J][r.index]=Ft[J],a._listened=!0}})},afterUpdate:function(n){n[b]._labels=I.prepare(n[b]._datasets)},afterDatasetsDraw:function(n){I.draw(n,n[b]._labels)},beforeEvent:function(n,r){if(n[b]._listened){var t=r.event;switch(t.type){case"mousemove":case"mouseout":!function Ne(n,r){var a,s,t=n[b],i=t._listeners;if(i.enter||i.leave){if("mousemove"===r.type)s=I.lookup(t._labels,r);else if("mouseout"!==r.type)return;a=t._hovered,t._hovered=s,function Ee(n,r,t,i,a){var s,o;!t&&!i||(t?i?t!==i&&(o=s=!0):o=!0:s=!0,o&&Q(n,r.leave,t,a),s&&Q(n,r.enter,i,a))}(n,i,a,s,r)}}(n,t);break;case"click":!function qe(n,r){var t=n[b],i=t._listeners.click,a=i&&I.lookup(t._labels,r);a&&Q(n,i,a,r)}(n,t)}}},afterEvent:function(n){var s,o,l,u,d,c,m,r=n[b],a=function(n,r){var a,s,o,l,t=n.slice(),i=[];for(a=0,o=r.length;a<o;++a)-1===(s=t.indexOf(l=r[a]))?i.push([l,1]):t.splice(s,1);for(a=0,o=t.length;a<o;++a)i.push([t[a],-1]);return i}(r._actives,r._actives=n.getActiveElements());for(s=0,o=a.length;s<o;++s)if((d=a[s])[1])for(l=0,u=(m=d[0].element[b]||[]).length;l<u;++l)(c=m[l]).$context.active=1===d[1],c.update(c.$context);(r._dirty||a.length)&&(I.update(r._labels),n.render()),delete r._dirty}};let Je=(()=>{class n{constructor(){this.barChartOptions={responsive:!0,scales:{x:{},y:{max:16,ticks:{stepSize:0}}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end"}}},this.barChartType="bar",this.barChartPlugins=[Fe],this.barChartData={labels:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],datasets:[{data:[0,0,0,0,0,0,0,0,0,0,0,0],label:"Horas",backgroundColor:"rgba(200, 16, 46, 0.5)"}]}}ngOnChanges(t){this.barChartData.datasets[0].data=this.input,this.chart?.update()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bar-chart-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(B.jh,5),2&t){let a;e.iGM(a=e.CRH())&&(i.chart=a.first)}},inputs:{input:"input"},features:[e.TTD],decls:1,vars:4,consts:[["baseChart","",1,"chart",3,"data","options","plugins","type"]],template:function(t,i){1&t&&e._UZ(0,"canvas",0),2&t&&e.Q6J("data",i.barChartData)("options",i.barChartOptions)("plugins",i.barChartPlugins)("type",i.barChartType)},dependencies:[B.jh],encapsulation:2}),n})();var Oe=h(3499),Re=h(2641),Ye=h(7579);const Qe=["modalContent"];function $e(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",11),e.NdJ("dayClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.dayClicked(a.day))})("eventTimesChanged",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(a))})("eventClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",a.event))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("activeDayIsOpen",t.activeDayIsOpen)}}function He(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-week-view",12),e.NdJ("eventTimesChanged",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(a))})("eventClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",a.event))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function je(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-day-view",12),e.NdJ("eventTimesChanged",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(a))})("eventClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",a.event))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function Ve(n,r){if(1&n&&(e.TgZ(0,"a",24),e._uU(1,"Editar"),e.qZA()),2&n){const t=e.oxw(2);e.MGl("href","./benefit-employee/edit/",t.modalData.event.meta.id,"",e.LSH)}}function Pe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteBenefit(a.modalData.event.meta.id))}),e._uU(1,"Eliminar"),e.qZA()}}function We(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"h5",14),e._uU(2,"Detalle del Beneficio"),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){const s=e.CHM(t).close;return e.KtG(s())}),e.TgZ(4,"span",16),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",17)(7,"h2"),e._uU(8),e.qZA()(),e.TgZ(9,"div",18)(10,"div",19)(11,"div",20)(12,"small"),e._uU(13,"Beneficio"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()(),e.TgZ(16,"div",20)(17,"small"),e._uU(18,"Detalle"),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA()()(),e.TgZ(21,"div",19)(22,"div",20)(23,"small"),e._uU(24,"Fecha de redenci\xf3n"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"date"),e.qZA()()()(),e.TgZ(28,"div",21),e.YNc(29,Ve,2,1,"a",22),e.YNc(30,Pe,2,0,"a",23),e.qZA()}if(2&n){const t=e.oxw();e.xp6(8),e.hij("Colaborador: ",t.modalData.event.title,""),e.xp6(7),e.Oqu(t.modalData.event.meta.benefits.name),e.xp6(5),e.Oqu(t.modalData.event.meta.benefit_detail.name),e.xp6(6),e.Oqu(e.xi3(27,6,t.modalData.event.meta.benefit_begin_time,"medium")),e.xp6(3),e.Q6J("ngIf",t.isAdmin),e.xp6(1),e.Q6J("ngIf",t.isAdmin)}}const oe={primary:{primary:"#37a91b",secondary:"#55ffbb"},secondary:{primary:"#888888",secondary:"#bbbbbb"}};let Ge=(()=>{class n{constructor(t,i,a){this.modal=t,this.benefitUserService=i,this.authService=a,this.view=y.wr.Month,this.CalendarView=y.wr,this.viewDate=new Date,this.isAdmin=!1,this.refresh=new Ye.x,this.events=[],this.activeDayIsOpen=!1}ngOnInit(){this.authService.validarAdmin().subscribe({next:t=>{this.isAdmin=t.admin},error:t=>{g().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",g().stopTimer),i.addEventListener("mouseleave",g().resumeTimer)}})}})}ngOnChanges(t){this.addEventsToCalendar(this.data)}dayClicked({date:t,events:i}){(0,Oe.Z)(t,this.viewDate)?(this.activeDayIsOpen=!((0,Re.Z)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=t):(this.viewDate=t,this.activeDayIsOpen=!1)}eventTimesChanged({event:t,newStart:i,newEnd:a}){this.events=this.events.map(s=>s===t?{...t,start:i,end:a}:s)}handleEvent(t,i){this.modalData={event:i,action:t},this.modal.open(this.modalContent,{size:"lg"})}setView(t){this.view=t}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}addEventsToCalendar(t){this.events=[],t?.flat().forEach(i=>{let{benefit_user:a}=i;a.forEach(s=>{("Mi Viernes"===s.benefits.name||"Mi Banco de Horas"===s.benefits.name||"Mi Cumplea\xf1os"===s.benefits.name)&&(this.events=[...this.events,{title:i.name+" - "+s.benefits.name+" - "+s.benefit_detail.name,start:new Date(s.benefit_begin_time),end:new Date(s.benefit_end_time),color:i.id===Number.parseInt(localStorage.getItem("uid"))?oe.primary:oe.secondary,draggable:!1,meta:s}])})})}deleteBenefit(t){g().fire({title:"Eliminar beneficio?",text:"Confirme que desea eliminar el beneficio.",icon:"question",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOutUp"},showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.benefitUserService.destroy(this.modalData.event.meta.id).subscribe({next:()=>{this.events=this.events.filter(a=>a.meta.id!==t),this.refresh.next(),this.modal.dismissAll(),this.activeDayIsOpen=!1},error:a=>console.log(a)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.FF),e.Y36(M),e.Y36(O.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["calendar-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(Qe,7),2&t){let a;e.iGM(a=e.CRH())&&(i.modalContent=a.first)}},inputs:{data:"data"},features:[e.TTD],decls:28,vars:20,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventTimesChanged","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","refresh","eventTimesChanged","eventClicked",4,"ngSwitchCase"],["modalContent",""],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventTimesChanged","eventClicked"],[3,"viewDate","events","refresh","eventTimesChanged","eventClicked"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-6"],[1,"modal-footer"],["class","btn btn-warning",3,"href",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"href"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("viewDateChange",function(s){return i.viewDate=s})("viewDateChange",function(){return i.closeOpenMonthViewDay()}),e._uU(4," Anterior "),e.qZA(),e.TgZ(5,"div",4),e.NdJ("viewDateChange",function(s){return i.viewDate=s}),e._uU(6," Hoy "),e.qZA(),e.TgZ(7,"div",5),e.NdJ("viewDateChange",function(s){return i.viewDate=s})("viewDateChange",function(){return i.closeOpenMonthViewDay()}),e._uU(8," Siguiente "),e.qZA()()(),e.TgZ(9,"div",1)(10,"h3"),e._uU(11),e.ALo(12,"calendarDate"),e.qZA()(),e.TgZ(13,"div",1)(14,"div",2)(15,"div",6),e.NdJ("click",function(){return i.setView(i.CalendarView.Month)}),e._uU(16," Mes "),e.qZA(),e.TgZ(17,"div",6),e.NdJ("click",function(){return i.setView(i.CalendarView.Week)}),e._uU(18," Semana "),e.qZA(),e.TgZ(19,"div",6),e.NdJ("click",function(){return i.setView(i.CalendarView.Day)}),e._uU(20," D\xeda "),e.qZA()()()(),e._UZ(21,"br"),e.TgZ(22,"div",7),e.YNc(23,$e,1,4,"mwl-calendar-month-view",8),e.YNc(24,He,1,3,"mwl-calendar-week-view",9),e.YNc(25,je,1,3,"mwl-calendar-day-view",9),e.qZA(),e.YNc(26,We,31,9,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(3),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(2),e.Q6J("viewDate",i.viewDate),e.xp6(2),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(4),e.Oqu(e.Dn7(12,16,i.viewDate,i.view+"ViewTitle","en")),e.xp6(4),e.ekj("active",i.view===i.CalendarView.Month),e.xp6(2),e.ekj("active",i.view===i.CalendarView.Week),e.xp6(2),e.ekj("active",i.view===i.CalendarView.Day),e.xp6(3),e.Q6J("ngSwitch",i.view),e.xp6(1),e.Q6J("ngSwitchCase",i.CalendarView.Month),e.xp6(1),e.Q6J("ngSwitchCase",i.CalendarView.Week),e.xp6(1),e.Q6J("ngSwitchCase",i.CalendarView.Day))},dependencies:[y.YX,y.MG,y.nA,y.GH,y.TK,y.Se,v.O5,v.RF,v.n9,y.vk,v.uU],encapsulation:2,changeDetection:0}),n})(),Le=(()=>{class n{constructor(){this.doughnutChartLabels=["Usadas","Disponibles"],this.doughnutChartData={labels:this.doughnutChartLabels,datasets:[{data:[this.totalBancoHoras,16-this.totalBancoHoras],backgroundColor:["#C8102E","gray"],hoverBackgroundColor:["#D8102E","darkgray"]}]},this.doughnutChartType="doughnut"}ngOnChanges(t){this.doughnutChartData.datasets[0].data=[this.totalBancoHoras,16-this.totalBancoHoras],this.chart?.chart?.update()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["doughnut-chart-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(B.jh,5),2&t){let a;e.iGM(a=e.CRH())&&(i.chart=a.first)}},inputs:{totalBancoHoras:"totalBancoHoras"},features:[e.TTD],decls:1,vars:2,consts:[["baseChart","",1,"chart",3,"data","type"]],template:function(t,i){1&t&&e._UZ(0,"canvas",0),2&t&&e.Q6J("data",i.doughnutChartData)("type",i.doughnutChartType)},dependencies:[B.jh],encapsulation:2}),n})();function ze(n,r){if(1&n&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij("",t," ")}}function Ke(n,r){if(1&n&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.MGl("value"," ",null==t?null:t.id,""),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Xe(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Ke,2,2,"option",8),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.users)}}function et(n,r){if(1&n&&(e.TgZ(0,"option",19),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.MGl("value"," ",t.id,""),e.xp6(1),e.hij(" ",t.name," ")}}function tt(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"option",19),e._uU(2),e.qZA(),e.YNc(3,et,2,2,"option",8),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.MGl("value"," ",null==t.user?null:t.user.id,""),e.xp6(1),e.hij(" ",null==t.user?null:t.user.name," "),e.xp6(1),e.Q6J("ngForOf",null==t.user?null:t.user.subordinates)}}function it(n,r){1&n&&e._UZ(0,"div")}function nt(n,r){1&n&&e._UZ(0,"img",35)}function rt(n,r){1&n&&e._UZ(0,"img",36)}function at(n,r){1&n&&e._UZ(0,"img",37)}function st(n,r){1&n&&e._UZ(0,"img",38)}function ot(n,r){1&n&&e._UZ(0,"img",39)}function lt(n,r){if(1&n&&(e.TgZ(0,"div",40)(1,"div",41),e._UZ(2,"doughnut-chart-component",42),e.qZA(),e.TgZ(3,"div",43),e._UZ(4,"bar-chart-component",44),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("totalBancoHoras",t.totalBancoHoras),e.xp6(2),e.Q6J("input",t.bancosHoras)}}function dt(n,r){if(1&n&&(e.TgZ(0,"div")(1,"div",24)(2,"div",25),e.YNc(3,nt,1,0,"img",26),e.YNc(4,rt,1,0,"img",27),e.YNc(5,at,1,0,"img",28),e.YNc(6,st,1,0,"img",29),e.YNc(7,ot,1,0,"img",30),e.qZA(),e.TgZ(8,"div",31)(9,"div",32),e._uU(10),e.qZA(),e._UZ(11,"ul",33),e.qZA()(),e.YNc(12,lt,5,2,"div",34),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","Mi Cumplea\xf1os"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Banco de Horas"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Horario Flexible"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Viernes"),e.xp6(1),e.Q6J("ngSwitchCase","Tiempo para el Viajero"),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("innerHTML",i.selectBenefit(t.id),e.oJD),e.xp6(1),e.Q6J("ngIf","Mi Banco de Horas"===t.name)}}function ut(n,r){if(1&n){const t=e.EpF();e._UZ(0,"hr"),e.TgZ(1,"div",20)(2,"div",21)(3,"h2"),e._uU(4),e.qZA(),e.TgZ(5,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closePanel())}),e.qZA()(),e.YNc(6,dt,13,9,"div",23),e.qZA()}if(2&n){const t=e.oxw();e.xp6(4),e.hij("Detalle de beneficios de ",null==t.currentUserBenefits?null:t.currentUserBenefits.name,""),e.xp6(2),e.Q6J("ngForOf",t.benefits)}}let ct=(()=>{class n{constructor(t,i,a,s,o,l,u){this.as=t,this.authService=i,this.benefitService=a,this.benefitUserService=s,this.fb=o,this.userService=l,this.router=u,this.bancosHoras=[0,0,0,0,0,0,0,0,0,0,0,0],this.isAdmin=!1,this.totalBancoHoras=0,this.viewBenefitUser=this.fb.group({years:[(new Date).getFullYear().toString(),p.kI.required],users:["",p.kI.required]}),this.years=[];const d=(new Date).getFullYear();for(let c=d;c>d-5;c--)this.years.push(c)}ngOnInit(){this.authService.validarAdmin().subscribe({next:t=>{this.isAdmin=t.admin,this.isAdmin?this.userService.index().subscribe({next:i=>{this.users=i},error:i=>{this.router.navigateByUrl("benefit-employee"),g().fire({title:"Error",icon:"error",html:i.error.msg,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",g().stopTimer),a.addEventListener("mouseleave",g().resumeTimer)}})}}):this.userService.show(Number.parseInt(localStorage.getItem("uid"))).subscribe({next:i=>{this.user=Object.values(i)[0]},error:i=>{this.router.navigateByUrl("benefit-employee"),g().fire({title:"Error",icon:"error",html:i.error.msg,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",g().stopTimer),a.addEventListener("mouseleave",g().resumeTimer)}})}})}}),this.benefitService.index().subscribe(t=>this.benefits=t),this.benefitUserService.index(Number.parseInt(localStorage.getItem("uid")),this.viewBenefitUser.get("years")?.value).subscribe(t=>{this.allUsersBenefits=t,this.calendarData=this.allUsersBenefits})}getBenefitDetail(t){this.viewBenefitUser.get("years")?.value&&this.viewBenefitUser.get("users")?.value&&this.benefitUserService.index(Number.parseInt(localStorage.getItem("uid")),this.viewBenefitUser.get("years")?.value).subscribe(i=>{this.allUsersBenefits=i,this.currentUserBenefits=this.allUsersBenefits.find(s=>s.id===Number.parseInt(this.viewBenefitUser.controls.users.value)),this.calendarData=this.allUsersBenefits,this.bancosHoras=this.bancosHoras.map(s=>0),this.currentUserBenefits.benefit_user.filter(s=>"Mi Banco de Horas"===s.benefits.name).map(s=>{this.bancosHoras[new Date(s.benefit_begin_time).getMonth()]+=s.benefit_detail.time_hours||0})})}selectBenefit(t){let i=this.currentUserBenefits?.benefit_user.filter(a=>a.benefit_id===t);if(i?.length){let a="";switch(i[0].benefits.name){case"Mi Cumplea\xf1os":return i?`<li class="list-group-item">\n              Fecha de redenci\xf3n: ${new v.uU("en-US").transform(i[0].benefit_begin_time,"dd/MM/yyyy, hh:mm a")}\n              <a class="text-link link-primary" href="/benefit-employee/show/${i[0].id}">Ampliar</a>\n            </li>`:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Banco de Horas":return this.totalBancoHoras=(new W).transform(i),i.forEach(s=>{a+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}: ${s.benefit_detail.time_hours} horas\n              <a class="text-link link-primary" href="/benefit-employee/show/${s.id}">Ampliar</a>\n            </li>`}),i?a:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Horario Flexible":return i.forEach(s=>{a+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}\n              <a class="text-link link-primary" href="/benefit-employee/show/${s.id}">Ampliar</a>\n            </li>`}),i?a:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Viernes":return i.forEach(s=>{a+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}: ${s.benefit_detail.time_hours} horas\n              <a class="text-link link-primary" href="/benefit-employee/show/${s.id}">Ampliar</a>\n            </li>`}),i?a:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Tiempo para el Viajero":return i?`<li class="list-group-item">\n                ${i[0].benefit_detail.name}\n                <a class="text-link link-primary" href="/benefit-employee/show/${i[0].id}">Ampliar</a>\n              </li>`:'<li class="list-group-item">No se encontraron beneficios registrados</li>'}}return this.totalBancoHoras=0,'<li class="list-group-item">No se encontraron beneficios registrados</li>'}closePanel(){this.viewBenefitUser.controls.users.setValue("")}downloadReport(){this.benefitUserService.downloadReport(this.viewBenefitUser.value).subscribe({next:t=>this.as.subscriptionAlert(_.fI.CREADO,_.gW.INFO,"El reporte fue programado y ser\xe1 enviado a tu correo. Revisa tu bandeja de correo no deseado si es necesario."),error:t=>t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.c9),e.Y36(O.e),e.Y36(G.T),e.Y36(M),e.Y36(p.qu),e.Y36(L.K),e.Y36(T.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["benefitemployee-index"]],decls:29,vars:8,consts:[[1,"row","mt-5"],[1,"col"],[3,"formGroup","ngSubmit"],[1,"row","p-3"],[1,"col-sm-4","my-1","my-sm-0"],[1,"input-group"],["for","years",1,"input-group-text"],["formControlName","years",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-8","my-1","my-sm-0"],["for","user",1,"input-group-text"],["formControlName","users",1,"form-select",3,"change"],["value",""],[4,"ngIf"],["type","submit",1,"btn","btn-outline-primary",3,"disabled"],[4,"ngIf","ngIfThen"],[1,"row","p-3","bg-light","rounded","shadow"],[3,"data"],["newBenefitDetailTemplate",""],[3,"value"],[1,"row","shadow","rounded","mb-3","pb-3","bg-light"],[1,"d-flex","flex-row","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[4,"ngFor","ngForOf"],[1,"input-group","mt-3"],[1,"input-group-text",2,"width","20%",3,"ngSwitch"],["src","./assets/images/cumplea\xf1os.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/banco_horas.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/horario_flexible.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/mi_viernes.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/tiempo_viajero.svg","width","100%;",4,"ngSwitchCase"],[1,"form-control"],[1,"card-header"],[1,"list-group","list-group-flush",3,"innerHTML"],["class","row",4,"ngIf"],["src","./assets/images/cumplea\xf1os.svg","width","100%;"],["src","./assets/images/banco_horas.svg","width","100%;"],["src","./assets/images/horario_flexible.svg","width","100%;"],["src","./assets/images/mi_viernes.svg","width","100%;"],["src","./assets/images/tiempo_viajero.svg","width","100%;"],[1,"row"],[1,"col-4"],[3,"totalBancoHoras"],[1,"col-8"],[3,"input"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return i.downloadReport()}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"A\xf1o"),e.qZA(),e.TgZ(8,"select",7),e.NdJ("change",function(s){return i.getBenefitDetail(s)}),e.YNc(9,ze,2,2,"option",8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",5)(12,"label",10),e._uU(13,"Colaborador"),e.qZA(),e.TgZ(14,"select",11),e.NdJ("change",function(s){return i.getBenefitDetail(s)}),e.TgZ(15,"option",12),e._uU(16,"-- Seleccione un colaborador --"),e.qZA(),e.YNc(17,Xe,2,1,"ng-container",13),e.YNc(18,tt,4,3,"ng-container",13),e.qZA(),e.TgZ(19,"button",14),e._uU(20,"Descargar"),e.qZA()()()()()()(),e.YNc(21,it,1,0,"div",15),e._UZ(22,"hr"),e.TgZ(23,"div",16)(24,"h2"),e._uU(25,"Calendario de beneficios MiViernes - Mis colaboradores"),e.qZA(),e._UZ(26,"calendar-component",17),e.qZA(),e.YNc(27,ut,7,2,"ng-template",null,18,e.W1O)),2&t){const a=e.MAs(28);e.xp6(2),e.Q6J("formGroup",i.viewBenefitUser),e.xp6(7),e.Q6J("ngForOf",i.years),e.xp6(8),e.Q6J("ngIf",i.isAdmin),e.xp6(1),e.Q6J("ngIf",!i.isAdmin),e.xp6(1),e.Q6J("disabled",!i.viewBenefitUser.valid),e.xp6(2),e.Q6J("ngIf",i.viewBenefitUser.valid)("ngIfThen",a),e.xp6(5),e.Q6J("data",i.calendarData)}},dependencies:[v.sg,v.O5,v.RF,v.n9,p._Y,p.YN,p.Kr,p.EJ,p.JJ,p.JL,p.sg,p.u,Je,Ge,Le],encapsulation:2}),n})();var $=h(3900);function ft(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",9),e.qZA())}function mt(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",9),e.qZA())}function ht(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",9),e.qZA())}function pt(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",9),e.qZA())}function vt(n,r){1&n&&(e.TgZ(0,"div"),e._UZ(1,"i",9),e.qZA())}const le=function(n){return{disabled:n}};let _t=(()=>{class n{constructor(t,i,a,s){this.activatedRoute=t,this.as=i,this.benefitUserService=a,this.router=s,this.loaded=!1}ngOnInit(){this.activatedRoute.params.pipe((0,$.w)(({id:t})=>this.benefitUserService.show(t))).subscribe({next:t=>{this.benefitUser=Object.values(t)[0],this.loaded=!0},error:t=>{this.router.navigateByUrl("benefit-employee/index"),this.as.subscriptionAlert(_.fI.ERROR,_.gW.ERROR,t.error.message)}})}deleteBenefit(t){g().fire({title:"Eliminar beneficio?",text:"Confirme que desea eliminar el beneficio.",icon:"question",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOutUp"},showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.benefitUserService.destroy(t).subscribe({next:a=>{this.as.subscriptionAlert(_.fI.ELIMINADO,_.gW.SUCCESS),this.router.navigateByUrl("/benefit-employee/index")},error:a=>this.as.subscriptionAlert(_.fI.ERROR,_.gW.ERROR,a.error.message)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(_.c9),e.Y36(M),e.Y36(T.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["benefitemployee-show"]],decls:36,vars:23,consts:[[1,"row","mt-5"],[1,"col"],[1,"row","p-5"],[1,"col-xs-12","col-md-4","d-flex","flex-column"],[4,"ngIf"],[1,"form-text"],[1,"btn-group","float-end","mt-5","mb-5"],["aria-current","page",1,"btn","btn-warning",3,"routerLink","ngClass"],[1,"btn","btn-outline-danger",3,"ngClass","click"],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,ft,2,0,"div",4),e._uU(5),e.TgZ(6,"span",5),e._uU(7,"Nombre"),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,mt,2,0,"div",4),e._uU(10),e.TgZ(11,"span",5),e._uU(12,"Beneficio"),e.qZA()(),e.TgZ(13,"div",3),e.YNc(14,ht,2,0,"div",4),e._uU(15),e.TgZ(16,"span",5),e._uU(17,"Tiempo utilizado"),e.qZA()()(),e.TgZ(18,"div",2)(19,"div",3),e.YNc(20,pt,2,0,"div",4),e._uU(21),e.ALo(22,"date"),e.TgZ(23,"span",5),e._uU(24,"Fecha de Inicio"),e.qZA()(),e.TgZ(25,"div",3),e.YNc(26,vt,2,0,"div",4),e._uU(27),e.ALo(28,"date"),e.TgZ(29,"span",5),e._uU(30,"Finaliza"),e.qZA()()(),e.TgZ(31,"div",6)(32,"a",7),e._uU(33,"Editar"),e.qZA(),e.TgZ(34,"a",8),e.NdJ("click",function(){return i.deleteBenefit(null==i.benefitUser?null:i.benefitUser.benefit_user[0].id)}),e._uU(35,"Eliminar"),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",!i.loaded),e.xp6(1),e.hij(" ",null==i.benefitUser?null:i.benefitUser.name," "),e.xp6(4),e.Q6J("ngIf",!i.loaded),e.xp6(1),e.hij(" ",null==i.benefitUser?null:i.benefitUser.benefit_user[0].benefits.name," "),e.xp6(4),e.Q6J("ngIf",!i.loaded),e.xp6(1),e.hij(" ",null==i.benefitUser?null:i.benefitUser.benefit_user[0].benefit_detail.name," "),e.xp6(5),e.Q6J("ngIf",!i.loaded),e.xp6(1),e.hij(" ",e.xi3(22,13,null==i.benefitUser?null:i.benefitUser.benefit_user[0].benefit_begin_time,"dd/MM/yyyy hh:ss a")," "),e.xp6(5),e.Q6J("ngIf",!i.loaded),e.xp6(1),e.hij(" ",e.xi3(28,16,null==i.benefitUser?null:i.benefitUser.benefit_user[0].benefit_end_time,"dd/MM/yyyy hh:ss a")," "),e.xp6(5),e.MGl("routerLink","/benefit-employee/edit/",null==i.benefitUser?null:i.benefitUser.benefit_user[0].id,""),e.Q6J("ngClass",e.VKq(19,le,!i.loaded)),e.xp6(2),e.Q6J("ngClass",e.VKq(21,le,!i.loaded)))},dependencies:[T.rH,v.mk,v.O5,v.uU],encapsulation:2}),n})();var gt=h(9906),bt=h(4128),Ct=h(8505),yt=h(9358);function wt(n,r){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function xt(n,r){1&n&&(e.TgZ(0,"span",27),e._UZ(1,"i",28),e.qZA())}function Tt(n,r){if(1&n&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.userIdErrors)}}function Zt(n,r){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ut(n,r){1&n&&(e.TgZ(0,"span",27),e._UZ(1,"i",28),e.qZA())}function At(n,r){if(1&n&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.benefitIdErrors)}}function Bt(n,r){if(1&n&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name,"")}}function St(n,r){1&n&&(e.TgZ(0,"span",27),e._UZ(1,"i",28),e.qZA())}function Dt(n,r){if(1&n&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.benefitDetailIdErrors)}}function It(n,r){if(1&n&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.datePickerErrors)}}function kt(n,r){if(1&n&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.timePickerErrors)}}const k=function(n){return{invalid:n}},H=n=>n<10?`0${n}`:`${n}`;let Mt=(()=>{class n extends w.Cw{fromModel(t){if(!t)return null;const i=t.split(":");return{hour:parseInt(i[0],10),minute:parseInt(i[1],10),second:parseInt(i[2],10)}}toModel(t){return null!=t?`${H(t.hour)}:${H(t.minute)}:${H(t.second)}`:null}}return n.\u0275fac=function(){let r;return function(i){return(r||(r=e.n5z(n)))(i||n)}}(),n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),de=(()=>{class n{get userIdErrors(){return(this.createForm.get("user_id")?.errors).required?"El campo es obligatorio":""}get benefitIdErrors(){return(this.createForm.get("benefit_id")?.errors).required?"El campo es obligatorio":""}get benefitDetailIdErrors(){return(this.createForm.get("benefit_detail_id")?.errors).required?"El campo es obligatorio":""}get datePickerErrors(){return(this.createForm.get("model")?.errors).required?"El campo es obligatorio":""}get timePickerErrors(){return(this.createForm.get("time")?.errors).required?"El campo es obligatorio":""}constructor(t,i,a,s,o,l,u,d,c,m){this.activatedRoute=t,this.as=i,this.authService=a,this.benefitService=s,this.benefitUserService=o,this.changeDetectorRef=l,this.fb=u,this.ngbCalendar=d,this.userService=c,this.router=m,this.benefitDetailSpinner=!0,this.createForm=this.fb.group({benefit_begin_time:[""],benefit_detail_id:[{value:"",disabled:!0},p.kI.required],benefit_end_time:[""],benefit_id:[{value:"",disabled:!0},p.kI.required],model:["",p.kI.required],time:["",p.kI.required],user_id:[{value:"",disabled:!0},p.kI.required]}),this.disableSubmitBtn=!1,this.meridian=!0,this.userAndBenefitSpinner=!0,this.isDayDisabled=C=>6===this.ngbCalendar.getWeekday(C)||7===this.ngbCalendar.getWeekday(C)}ngOnInit(){(0,bt.D)({validarAdmin:this.authService.validarAdmin().pipe((0,$.w)(t=>t?this.userService.index():this.userService.show(Number.parseInt(localStorage.getItem("uid"))))),loadBenefits:this.benefitService.index().pipe((0,Ct.b)(t=>{this.benefits=t,this.createForm.get("benefit_id")?.enable(),this.userAndBenefitSpinner=!1}))}).subscribe({next:({validarAdmin:t})=>{this.users=Object.values(t),this.createForm.get("user_id")?.enable(),this.router.url.includes("edit")&&this.activatedRoute.params.pipe((0,$.w)(({id:a})=>this.benefitUserService.show(a))).subscribe({next:a=>{this.currentUserBenefits=Object.values(a)[0],this.createForm.get("user_id")?.disable(),this.createForm.get("benefit_id")?.setValue(this.currentUserBenefits.benefit_user[0].benefits.id),this.dp?.navigateTo({year:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getFullYear(),month:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMonth()+1}),this.createForm.get("model")?.setValue({year:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getFullYear(),month:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMonth()+1,day:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getDate()}),this.tp?.updateHour(new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getHours().toString()),this.tp?.updateMinute(new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMinutes().toString()),this.createForm.get("user_id")?.setValue(this.currentUserBenefits.id),this.fillBenefitDetail(this.currentUserBenefits.benefit_user[0].benefits.id)},error:a=>{this.router.navigateByUrl("benefit-employee"),this.as.subscriptionAlert(_.fI.ERROR,_.gW.ERROR,a.statusText)}})},error:t=>{this.router.navigateByUrl("benefit-employee"),g().fire({title:"Error",icon:"error",html:t.error.message,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",g().stopTimer),i.addEventListener("mouseleave",g().resumeTimer)}})}}),this.createForm.get("benefit_detail_id").valueChanges.subscribe(t=>{this.selectedBenefitDetail=this.benefit_details?.find(i=>i.id===Number.parseInt(t||0))})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}campoEsValido(t){return this.createForm.controls[t].errors&&this.createForm.controls[t].touched}save(){if(this.createForm.invalid)return void this.createForm.markAllAsTouched();let t=`${this.createForm.get("model")?.value.year}-${this.createForm.get("model")?.value.month}-${this.createForm.get("model")?.value.day} ${this.createForm.get("time")?.value}`;this.createForm.get("benefit_begin_time")?.setValue((0,v.p6)(new Date(t),"yyyy-MM-dd HH:mm:ss","en-US")),this.createForm.get("benefit_end_time")?.setValue((0,v.p6)((0,yt.Z)(new Date(t),this.selectedBenefitDetail.time_hours).toString(),"yyyy-MM-dd HH:mm:ss","en-US")),this.currentUserBenefits?.id?this.benefitUserService.update(this.currentUserBenefits.benefit_user[0].id,this.createForm.value).subscribe({next:()=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(_.fI.ACTUALIZADO,_.gW.SUCCESS)},error:({error:i})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(_.fI.ERROR,_.gW.ERROR,i.message)}}):this.benefitUserService.create(this.createForm.value).subscribe({next:()=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(_.fI.CREADO,_.gW.SUCCESS),this.createForm.reset()},error:({error:i})=>{this.as.subscriptionAlert(_.fI.ERROR,_.gW.ERROR,i.message),this.disableSubmitBtn=!1}}),this.disableSubmitBtn=!0}fillBenefitDetail(t){this.createForm.get("benefit_detail_id").reset(""),this.benefitDetailSpinner=!1,this.benefitService.show(t.target?.value||t).subscribe(i=>{this.benefit_details=Object.values(i)[0].benefit_detail,this.createForm.get("benefit_id").valid&&(this.benefitDetailSpinner=!0,this.createForm.get("benefit_detail_id").enable()),this.router.url.includes("edit")&&this.createForm.get("benefit_detail_id")?.setValue(this.currentUserBenefits.benefit_user[0].benefit_detail.id)}),this.isDayDisabled="Mi Viernes"==t.target.options[t.target.options.selectedIndex].text?i=>5!==this.ngbCalendar.getWeekday(i):i=>6===this.ngbCalendar.getWeekday(i)||7===this.ngbCalendar.getWeekday(i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T.gz),e.Y36(_.c9),e.Y36(O.e),e.Y36(G.T),e.Y36(M),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(w.vL),e.Y36(L.K),e.Y36(T.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["benefitemployee-create"]],viewQuery:function(t,i){if(1&t&&(e.Gf(w.VL,5),e.Gf(w.Pm,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.dp=a.first),e.iGM(a=e.CRH())&&(i.tp=a.first)}},decls:52,vars:34,consts:[[1,"row","mt-5"],[1,"col"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-xl-9","px-2","d-flex","flex-column","justify-content-evenly"],[1,"row"],["for","user_id"],[1,"input-group"],["formControlName","user_id","id","user_id",1,"form-select",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","input-group-text","id","basic-addon1",4,"ngIf"],["class","text-danger",4,"ngIf"],["for","benefit_id"],["formControlName","benefit_id","id","benefit_id",1,"form-select",3,"ngClass","change"],["for","benefit_detail_id"],["formControlName","benefit_detail_id","id","benefit_detail_id",1,"form-select",3,"ngClass"],[1,"col-xl-3","px-2","d-flex","flex-column"],["formControlName","model",1,"m-2",3,"ngClass","markDisabled","navigate"],["dp",""],["formControlName","time",1,"m-2","d-flex","justify-content-around",3,"ngClass","meridian"],["tp",""],["type","hidden","formControlName","benefit_begin_time",3,"value"],["type","hidden","formControlName","benefit_end_time"],[1,"mb-3"],["type","submit",1,"btn","btn-success","float-end",3,"disabled"],[3,"value"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"],[1,"text-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return i.save()}),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"label",6),e._uU(10,"Selecciona un colaborador"),e.qZA(),e.TgZ(11,"div",7)(12,"select",8)(13,"option",9),e._uU(14,"-- Seleccione Colaborador --"),e.qZA(),e.YNc(15,wt,2,2,"option",10),e.qZA(),e.YNc(16,xt,2,0,"span",11),e.qZA(),e.YNc(17,Tt,2,1,"small",12),e.qZA(),e.TgZ(18,"div",5)(19,"label",13),e._uU(20,"Selecciona un beneficio"),e.qZA(),e.TgZ(21,"div",7)(22,"select",14),e.NdJ("change",function(s){return i.fillBenefitDetail(s)}),e.TgZ(23,"option",9),e._uU(24,"-- Seleccione Beneficio --"),e.qZA(),e.YNc(25,Zt,2,2,"option",10),e.qZA(),e.YNc(26,Ut,2,0,"span",11),e.qZA(),e.YNc(27,At,2,1,"small",12),e.qZA(),e.TgZ(28,"div",5)(29,"label",15),e._uU(30,"Selecciona un Detalle"),e.qZA(),e.TgZ(31,"div",7)(32,"select",16)(33,"option",9),e._uU(34,"-- Seleccione Detalle --"),e.qZA(),e.YNc(35,Bt,2,2,"option",10),e.qZA(),e.YNc(36,St,2,0,"span",11),e.qZA(),e.YNc(37,Dt,2,1,"small",12),e.qZA()(),e.TgZ(38,"div",17)(39,"div",5)(40,"ngb-datepicker",18,19),e.NdJ("navigate",function(s){return i.date=s.next}),e.qZA(),e.YNc(42,It,2,1,"small",12),e.qZA(),e.TgZ(43,"div",5),e._UZ(44,"ngb-timepicker",20,21),e.YNc(46,kt,2,1,"small",12),e.qZA()()(),e._UZ(47,"input",22)(48,"input",23),e.TgZ(49,"div",24)(50,"button",25),e._uU(51),e.qZA()()()()()),2&t&&(e.xp6(2),e.AsE("",null!=i.currentUserBenefits&&i.currentUserBenefits.id?"Actualizar":"Nuevo"," beneficio para ",null==i.currentUserBenefits?null:i.currentUserBenefits.name,""),e.xp6(3),e.Q6J("formGroup",i.createForm),e.xp6(7),e.Q6J("ngClass",e.VKq(24,k,i.campoEsValido("user_id"))),e.xp6(3),e.Q6J("ngForOf",i.users),e.xp6(1),e.Q6J("ngIf",i.userAndBenefitSpinner),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("user_id")),e.xp6(5),e.Q6J("ngClass",e.VKq(26,k,i.campoEsValido("benefit_id"))),e.xp6(3),e.Q6J("ngForOf",i.benefits),e.xp6(1),e.Q6J("ngIf",i.userAndBenefitSpinner),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("benefit_id")),e.xp6(5),e.Q6J("ngClass",e.VKq(28,k,i.campoEsValido("benefit_detail_id"))),e.xp6(3),e.Q6J("ngForOf",i.benefit_details),e.xp6(1),e.Q6J("ngIf",!i.benefitDetailSpinner),e.xp6(1),e.Q6J("ngIf",i.campoEsValido("benefit_detail_id")),e.xp6(3),e.Q6J("ngClass",e.VKq(30,k,i.campoEsValido("model")))("markDisabled",i.isDayDisabled),e.xp6(2),e.Q6J("ngIf",i.campoEsValido("model")),e.xp6(2),e.Q6J("ngClass",e.VKq(32,k,i.campoEsValido("time")))("meridian",i.meridian),e.xp6(2),e.Q6J("ngIf",i.campoEsValido("time")),e.xp6(1),e.s9C("value",i.benefit_begin_time),e.xp6(3),e.Q6J("disabled",i.disableSubmitBtn),e.xp6(1),e.hij(" ",null!=i.currentUserBenefits&&i.currentUserBenefits.id?"Actualizar":"Crear"," "))},dependencies:[v.mk,v.sg,v.O5,w.VL,w.Pm,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),n})();const Et=[{path:"",component:gt.t,children:[{path:"index",component:ct},{path:"edit/:id",component:de},{path:"show/:id",component:_t},{path:"create",component:de},{path:"**",redirectTo:"index"}]}];let Nt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[T.Bz.forChild(Et),T.Bz]}),n})(),qt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[W,{provide:w.Cw,useClass:Mt}],imports:[Nt,y._8.forRoot({provide:y._A,useFactory:me.x}),v.ez,w.M,w.UL,B.vQ,p.UX,p.u5]}),n})()}}]);