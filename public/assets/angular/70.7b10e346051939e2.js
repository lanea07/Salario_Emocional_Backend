"use strict";(self.webpackChunksalarioemocionalfrontend=self.webpackChunksalarioemocionalfrontend||[]).push([[70],{2070:(It,j,h)=>{h.r(j),h.d(j,{BenefitEmployeeModule:()=>St});var v=h(4755),p=h(9401),C=h(1585),fe=h(5770),A=h(9541),y=h(9089),B=h(5118),me=h(5226),g=h.n(me),e=h(2223);let P=(()=>{class i{transform(t){return t.reduce((a,s)=>a+s.benefit_detail.time_hours,0),t?t.reduce((a,s)=>a+s.benefit_detail.time_hours,0):0}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"sum",type:i,pure:!0}),i})();var Z=h(3144),he=h(2340);let q=(()=>{class i{constructor(t){this.http=t,this.apiBaseUrl=he.N.apiBaseUrl,this.token=localStorage.getItem("token")}index(t,n){const a=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(`${this.apiBaseUrl}/benefituser?userId=${t}&year=${n}`,{headers:a,withCredentials:!0})}show(t){const n=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(`${this.apiBaseUrl}/benefituser/${t}`,{headers:n,withCredentials:!0})}create(t){const n=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.post(`${this.apiBaseUrl}/benefituser`,t,{headers:n,withCredentials:!0})}update(t,n){const a=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.put(`${this.apiBaseUrl}/benefituser/${t}`,n,{headers:a,withCredentials:!0})}destroy(t){const n=(new Z.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.delete(`${this.apiBaseUrl}/benefituser/${t}`,{headers:n,withCredentials:!0})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(Z.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var G=h(1239),W=h(427),O=h(6518),f=h(1086),Y=h(5743),L=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var i=window.screen;if(i)return(i.deviceXDPI||1)/(i.logicalXDPI||1)}return 1}(),U_textSize=function(i,r,t){var l,n=[].concat(r),a=n.length,s=i.font,o=0;for(i.font=t.string,l=0;l<a;++l)o=Math.max(i.measureText(n[l]).width,o);return i.font=s,{height:a*t.lineHeight,width:o}};function Q(i,r){var t=r.x,n=r.y;if(null===t)return{x:0,y:-1};if(null===n)return{x:1,y:0};var a=i.x-t,s=i.y-n,o=Math.sqrt(a*a+s*s);return{x:o?a/o:0,y:o?s/o:-1}}var ve=0,z=1,K=2,X=4,ee=8;function k(i,r,t){var n=ve;return i<t.left?n|=z:i>t.right&&(n|=K),r<t.top?n|=ee:r>t.bottom&&(n|=X),n}function E(i,r){var a,s,t=r.anchor,n=i;return r.clamp&&(n=function _e(i,r){for(var u,d,c,t=i.x0,n=i.y0,a=i.x1,s=i.y1,o=k(t,n,r),l=k(a,s,r);o|l&&!(o&l);)(u=o||l)&ee?(d=t+(a-t)*(r.top-n)/(s-n),c=r.top):u&X?(d=t+(a-t)*(r.bottom-n)/(s-n),c=r.bottom):u&K?(c=n+(s-n)*(r.right-t)/(a-t),d=r.right):u&z&&(c=n+(s-n)*(r.left-t)/(a-t),d=r.left),u===o?o=k(t=d,n=c,r):l=k(a=d,s=c,r);return{x0:t,x1:a,y0:n,y1:s}}(n,r.area)),"start"===t?(a=n.x0,s=n.y0):"end"===t?(a=n.x1,s=n.y1):(a=(n.x0+n.x1)/2,s=(n.y0+n.y1)/2),function pe(i,r,t,n,a){switch(a){case"center":t=n=0;break;case"bottom":t=0,n=1;break;case"right":t=1,n=0;break;case"left":t=-1,n=0;break;case"top":t=0,n=-1;break;case"start":t=-t,n=-n;break;case"end":break;default:a*=Math.PI/180,t=Math.cos(a),n=Math.sin(a)}return{x:i,y:r,vx:t,vy:n}}(a,s,i.vx,i.vy,r.align)}var F={arc:function(i,r){var t=(i.startAngle+i.endAngle)/2,n=Math.cos(t),a=Math.sin(t),s=i.innerRadius,o=i.outerRadius;return E({x0:i.x+n*s,y0:i.y+a*s,x1:i.x+n*o,y1:i.y+a*o,vx:n,vy:a},r)},point:function(i,r){var t=Q(i,r.origin),n=t.x*i.options.radius,a=t.y*i.options.radius;return E({x0:i.x-n,y0:i.y-a,x1:i.x+n,y1:i.y+a,vx:t.x,vy:t.y},r)},bar:function(i,r){var t=Q(i,r.origin),n=i.x,a=i.y,s=0,o=0;return i.horizontal?(n=Math.min(i.x,i.base),s=Math.abs(i.base-i.x)):(a=Math.min(i.y,i.base),o=Math.abs(i.base-i.y)),E({x0:n,y0:a+o,x1:n+s,y1:a,vx:t.x,vy:t.y},r)},fallback:function(i,r){var t=Q(i,r.origin);return E({x0:i.x,y0:i.y,x1:i.x+(i.width||0),y1:i.y+(i.height||0),vx:t.x,vy:t.y},r)}},w=function(i){return Math.round(i*L)/L};function be(i,r){var t=r.chart.getDatasetMeta(r.datasetIndex).vScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var n=t.getBasePixel();return i.horizontal?{x:n,y:null}:{x:null,y:n}}function Ce(i){return i instanceof Y.qi?F.arc:i instanceof Y.od?F.point:i instanceof Y.ZL?F.bar:F.fallback}function Te(i,r,t){var n=i.shadowBlur,a=t.stroked,s=w(t.x),o=w(t.y),l=w(t.w);a&&i.strokeText(r,s,o,l),t.filled&&(n&&a&&(i.shadowBlur=0),i.fillText(r,s,o,l),n&&a&&(i.shadowBlur=n))}var te=function(i,r,t,n){var a=this;a._config=i,a._index=n,a._model=null,a._rects=null,a._ctx=r,a._el=t};(0,f.a4)(te.prototype,{_modelize:function(i,r,t,n){var a=this,s=a._index,o=(0,f.a0)((0,f.a)([t.font,{}],n,s)),l=(0,f.a)([t.color,f.d.color],n,s);return{align:(0,f.a)([t.align,"center"],n,s),anchor:(0,f.a)([t.anchor,"center"],n,s),area:n.chart.chartArea,backgroundColor:(0,f.a)([t.backgroundColor,null],n,s),borderColor:(0,f.a)([t.borderColor,null],n,s),borderRadius:(0,f.a)([t.borderRadius,0],n,s),borderWidth:(0,f.a)([t.borderWidth,0],n,s),clamp:(0,f.a)([t.clamp,!1],n,s),clip:(0,f.a)([t.clip,!1],n,s),color:l,display:i,font:o,lines:r,offset:(0,f.a)([t.offset,4],n,s),opacity:(0,f.a)([t.opacity,1],n,s),origin:be(a._el,n),padding:(0,f.E)((0,f.a)([t.padding,4],n,s)),positioner:Ce(a._el),rotation:(0,f.a)([t.rotation,0],n,s)*(Math.PI/180),size:U_textSize(a._ctx,r,o),textAlign:(0,f.a)([t.textAlign,"start"],n,s),textShadowBlur:(0,f.a)([t.textShadowBlur,0],n,s),textShadowColor:(0,f.a)([t.textShadowColor,l],n,s),textStrokeColor:(0,f.a)([t.textStrokeColor,l],n,s),textStrokeWidth:(0,f.a)([t.textStrokeWidth,0],n,s)}},update:function(i){var o,l,u,r=this,t=null,n=null,a=r._index,s=r._config,d=(0,f.a)([s.display,!0],i,a);d&&(l=(0,f.v)((0,f.Q)(s.formatter,[o=i.dataset.data[a],i]),o),(u=(0,f.k)(l)?[]:function(i){var t,r=[];for(i=[].concat(i);i.length;)"string"==typeof(t=i.pop())?r.unshift.apply(r,t.split("\n")):Array.isArray(t)?i.push.apply(i,t):(0,f.k)(i)||r.unshift(""+t);return r}(l)).length&&(n=function ge(i){var r=i.borderWidth||0,t=i.padding,n=i.size.height,a=i.size.width,s=-a/2,o=-n/2;return{frame:{x:s-t.left-r,y:o-t.top-r,w:a+t.width+2*r,h:n+t.height+2*r},text:{x:s,y:o,w:a,h:n}}}(t=r._modelize(d,u,s,i)))),r._model=t,r._rects=n},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(i,r){var o,n=i.ctx,a=this._model,s=this._rects;this.visible()&&(n.save(),a.clip&&(o=a.area,n.beginPath(),n.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),n.clip()),n.globalAlpha=function(i,r,t){return Math.max(i,Math.min(r,t))}(0,a.opacity,1),n.translate(w(r.x),w(r.y)),n.rotate(a.rotation),function we(i,r,t){var n=t.backgroundColor,a=t.borderColor,s=t.borderWidth;!n&&(!a||!s)||(i.beginPath(),function ye(i,r,t,n,a,s){var o=Math.PI/2;if(s){var l=Math.min(s,a/2,n/2),u=r+l,d=t+l,c=r+n-l,m=t+a-l;i.moveTo(r,d),u<c&&d<m?(i.arc(u,d,l,-Math.PI,-o),i.arc(c,d,l,-o,0),i.arc(c,m,l,0,o),i.arc(u,m,l,o,Math.PI)):u<c?(i.moveTo(u,t),i.arc(c,d,l,-o,o),i.arc(u,d,l,o,Math.PI+o)):d<m?(i.arc(u,d,l,-Math.PI,0),i.arc(u,m,l,0,Math.PI)):i.arc(u,d,l,-Math.PI,Math.PI),i.closePath(),i.moveTo(r,t)}else i.rect(r,t,n,a)}(i,w(r.x)+s/2,w(r.y)+s/2,w(r.w)-s,w(r.h)-s,t.borderRadius),i.closePath(),n&&(i.fillStyle=n,i.fill()),a&&s&&(i.strokeStyle=a,i.lineWidth=s,i.lineJoin="miter",i.stroke()))}(n,s.frame,a),function Ze(i,r,t,n){var b,a=n.textAlign,s=n.color,o=!!s,l=n.font,u=r.length,d=n.textStrokeColor,c=n.textStrokeWidth,m=d&&c;if(u&&(o||m))for(t=function xe(i,r,t){var n=t.lineHeight,a=i.w,s=i.x;return"center"===r?s+=a/2:("end"===r||"right"===r)&&(s+=a),{h:n,w:a,x:s,y:i.y+n/2}}(t,a,l),i.font=l.string,i.textAlign=a,i.textBaseline="middle",i.shadowBlur=n.textShadowBlur,i.shadowColor=n.textShadowColor,o&&(i.fillStyle=s),m&&(i.lineJoin="round",i.lineWidth=c,i.strokeStyle=d),b=0,u=r.length;b<u;++b)Te(i,r[b],{stroked:m,filled:o,w:t.w,x:t.x,y:t.y+t.h*b})}(n,a.lines,s.text,a),n.restore())}});var De=Number.MIN_SAFE_INTEGER||-9007199254740991,Ae=Number.MAX_SAFE_INTEGER||9007199254740991;function S(i,r,t){var n=Math.cos(t),a=Math.sin(t),s=r.x,o=r.y;return{x:s+n*(i.x-s)-a*(i.y-o),y:o+a*(i.x-s)+n*(i.y-o)}}function ie(i,r){var s,o,d,t=Ae,n=De,a=r.origin;for(s=0;s<i.length;++s)d=r.vx*((o=i[s]).x-a.x)+r.vy*(o.y-a.y),t=Math.min(t,d),n=Math.max(n,d);return{min:t,max:n}}function N(i,r){var t=r.x-i.x,n=r.y-i.y,a=Math.sqrt(t*t+n*n);return{vx:(r.x-i.x)/a,vy:(r.y-i.y)/a,origin:i,ln:a}}var ne=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function re(i,r,t){var n=r.positioner(i,r),a=n.vx,s=n.vy;if(!a&&!s)return{x:n.x,y:n.y};var o=t.w,l=t.h,u=r.rotation,d=Math.abs(o/2*Math.cos(u))+Math.abs(l/2*Math.sin(u)),c=Math.abs(o/2*Math.sin(u))+Math.abs(l/2*Math.cos(u)),m=1/Math.max(Math.abs(a),Math.abs(s));return d*=a*m,c*=s*m,{x:n.x+(d+=r.offset*a),y:n.y+(c+=r.offset*s)}}(0,f.a4)(ne.prototype,{center:function(){var i=this._rect;return{x:i.x+i.w/2,y:i.y+i.h/2}},update:function(i,r,t){this._rotation=t,this._rect={x:r.x+i.x,y:r.y+i.y,w:r.w,h:r.h}},contains:function(i){var r=this,n=r._rect;return!((i=S(i,r.center(),-r._rotation)).x<n.x-1||i.y<n.y-1||i.x>n.x+n.w+2||i.y>n.y+n.h+2)},intersects:function(i){var a,s,o,r=this._points(),t=i._points(),n=[N(r[0],r[1]),N(r[0],r[3])];for(this._rotation!==i._rotation&&n.push(N(t[0],t[1]),N(t[0],t[3])),a=0;a<n.length;++a)if(s=ie(r,n[a]),o=ie(t,n[a]),s.max<o.min||o.max<s.min)return!1;return!0},_points:function(){var i=this,r=i._rect,t=i._rotation,n=i.center();return[S({x:r.x,y:r.y},n,t),S({x:r.x+r.w,y:r.y},n,t),S({x:r.x+r.w,y:r.y+r.h},n,t),S({x:r.x,y:r.y+r.h},n,t)]}});var M={prepare:function(i){var t,n,a,s,o,r=[];for(t=0,a=i.length;t<a;++t)for(n=0,s=i[t].length;n<s;++n)r.push(o=i[t][n]),o.$layout={_box:new ne,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return r.sort(function(l,u){var d=l.$layout,c=u.$layout;return d._idx===c._idx?c._set-d._set:c._idx-d._idx}),this.update(r),r},update:function(i){var t,n,a,s,o,r=!1;for(t=0,n=i.length;t<n;++t)s=(a=i[t]).model(),(o=a.$layout)._hidable=s&&"auto"===s.display,o._visible=a.visible(),r|=o._hidable;r&&function Ue(i){var r,t,n,a,s,o,l;for(r=0,t=i.length;r<t;++r)(a=(n=i[r]).$layout)._visible&&(l=new Proxy(n._el,{get:(u,d)=>u.getProps([d],!0)[d]}),s=n.geometry(),o=re(l,n.model(),s),a._box.update(o,s,n.rotation()));(function Be(i,r){var t,n,a,s;for(t=i.length-1;t>=0;--t)for(a=i[t].$layout,n=t-1;n>=0&&a._visible;--n)(s=i[n].$layout)._visible&&a._box.intersects(s._box)&&r(a,s)})(i,function(u,d){var c=u._hidable,m=d._hidable;c&&m||m?d._visible=!1:c&&(u._visible=!1)})}(i)},lookup:function(i,r){var t,n;for(t=i.length-1;t>=0;--t)if((n=i[t].$layout)&&n._visible&&n._box.contains(r))return i[t];return null},draw:function(i,r){var t,n,a,s,o,l;for(t=0,n=r.length;t<n;++t)(s=(a=r[t]).$layout)._visible&&(o=a.geometry(),l=re(a._el,a.model(),o),s._box.update(l,o,a.rotation()),a.draw(i,l))}},_="$datalabels",ae="$default";function H(i,r,t,n){if(r){var o,a=t.$context,s=t.$groups;r[s._set]&&(o=r[s._set][s._key])&&!0===(0,f.Q)(o,[a,n])&&(i[_]._dirty=!0,t.update(a))}}var Ne={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(i){if((0,f.k)(i))return null;var t,n,a,r=i;if((0,f.i)(i))if((0,f.k)(i.label))if((0,f.k)(i.r))for(r="",a=0,n=(t=Object.keys(i)).length;a<n;++a)r+=(0!==a?", ":"")+t[a]+": "+i[t[a]];else r=i.r;else r=i.label;return""+r},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(i){i[_]={_actives:[]}},beforeUpdate:function(i){var r=i[_];r._listened=!1,r._listeners={},r._datasets=[],r._labels=[]},afterDatasetUpdate:function(i,r,t){var m,b,de,ue,V,ce,D,T,n=r.index,a=i[_],s=a._datasets[n]=[],o=i.isDatasetVisible(n),l=i.data.datasets[n],u=function Ie(i,r){var s,o,t=i.datalabels,n={},a=[];return!1===t?null:(!0===t&&(t={}),r=(0,f.a4)({},[r,t]),s=r.labels||{},o=Object.keys(s),delete r.labels,o.length?o.forEach(function(l){s[l]&&a.push((0,f.a4)({},[r,s[l],{_key:l}]))}):a.push(r),n=a.reduce(function(l,u){return(0,f.F)(u.listeners||{},function(d,c){l[c]=l[c]||{},l[c][u._key||ae]=d}),delete u.listeners,l},{}),{labels:a,listeners:n})}(l,t),d=r.meta.data||[],c=i.ctx;for(c.save(),m=0,de=d.length;m<de;++m)if((D=d[m])[_]=[],o&&D&&i.getDataVisibility(m)&&!D.skip)for(b=0,ue=u.labels.length;b<ue;++b)ce=(V=u.labels[b])._key,(T=new te(V,c,D,m)).$groups={_set:n,_key:ce||ae},T.$context={active:!1,chart:i,dataIndex:m,dataset:l,datasetIndex:n},T.update(T.$context),D[_].push(T),s.push(T);c.restore(),(0,f.a4)(a._listeners,u.listeners,{merger:function(J,R,Mt){R[J]=R[J]||{},R[J][r.index]=Mt[J],a._listened=!0}})},afterUpdate:function(i){i[_]._labels=M.prepare(i[_]._datasets)},afterDatasetsDraw:function(i){M.draw(i,i[_]._labels)},beforeEvent:function(i,r){if(i[_]._listened){var t=r.event;switch(t.type){case"mousemove":case"mouseout":!function Ee(i,r){var a,s,t=i[_],n=t._listeners;if(n.enter||n.leave){if("mousemove"===r.type)s=M.lookup(t._labels,r);else if("mouseout"!==r.type)return;a=t._hovered,t._hovered=s,function ke(i,r,t,n,a){var s,o;!t&&!n||(t?n?t!==n&&(o=s=!0):o=!0:s=!0,o&&H(i,r.leave,t,a),s&&H(i,r.enter,n,a))}(i,n,a,s,r)}}(i,t);break;case"click":!function Fe(i,r){var t=i[_],n=t._listeners.click,a=n&&M.lookup(t._labels,r);a&&H(i,n,a,r)}(i,t)}}},afterEvent:function(i){var s,o,l,u,d,c,m,r=i[_],a=function(i,r){var a,s,o,l,t=i.slice(),n=[];for(a=0,o=r.length;a<o;++a)-1===(s=t.indexOf(l=r[a]))?n.push([l,1]):t.splice(s,1);for(a=0,o=t.length;a<o;++a)n.push([t[a],-1]);return n}(r._actives,r._actives=i.getActiveElements());for(s=0,o=a.length;s<o;++s)if((d=a[s])[1])for(l=0,u=(m=d[0].element[_]||[]).length;l<u;++l)(c=m[l]).$context.active=1===d[1],c.update(c.$context);(r._dirty||a.length)&&(M.update(r._labels),i.render()),delete r._dirty}};let Je=(()=>{class i{constructor(){this.barChartOptions={responsive:!0,scales:{x:{},y:{max:16,ticks:{stepSize:0}}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end"}}},this.barChartType="bar",this.barChartPlugins=[Ne],this.barChartData={labels:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],datasets:[{data:[0,0,0,0,0,0,0,0,0,0,0,0],label:"Horas",backgroundColor:"rgba(200, 16, 46, 0.5)"}]}}ngOnChanges(t){this.barChartData.datasets[0].data=this.input,this.chart?.update()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["bar-chart-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(A.jh,5),2&t){let a;e.iGM(a=e.CRH())&&(n.chart=a.first)}},inputs:{input:"input"},features:[e.TTD],decls:1,vars:4,consts:[["baseChart","",1,"chart",3,"data","options","plugins","type"]],template:function(t,n){1&t&&e._UZ(0,"canvas",0),2&t&&e.Q6J("data",n.barChartData)("options",n.barChartOptions)("plugins",n.barChartPlugins)("type",n.barChartType)},dependencies:[A.jh],encapsulation:2}),i})();var qe=h(3499),Oe=h(2641),Ye=h(7579);const Qe=["modalContent"];function He(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",11),e.NdJ("dayClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.dayClicked(a.day))})("eventTimesChanged",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(a))})("eventClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",a.event))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("activeDayIsOpen",t.activeDayIsOpen)}}function $e(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mwl-calendar-week-view",12),e.NdJ("eventTimesChanged",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(a))})("eventClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",a.event))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function Ve(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mwl-calendar-day-view",12),e.NdJ("eventTimesChanged",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(a))})("eventClicked",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",a.event))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function Re(i,r){if(1&i&&(e.TgZ(0,"a",24),e._uU(1,"Editar"),e.qZA()),2&i){const t=e.oxw(2);e.MGl("href","./benefit-employee/edit/",t.modalData.event.meta.id,"",e.LSH)}}function je(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.deleteBenefit(a.modalData.event.meta.id))}),e._uU(1,"Eliminar"),e.qZA()}}function Pe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",13)(1,"h5",14),e._uU(2,"Detalle del Beneficio"),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){const s=e.CHM(t).close;return e.KtG(s())}),e.TgZ(4,"span",16),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",17)(7,"h2"),e._uU(8),e.qZA()(),e.TgZ(9,"div",18)(10,"div",19)(11,"div",20)(12,"small"),e._uU(13,"Beneficio"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()(),e.TgZ(16,"div",20)(17,"small"),e._uU(18,"Detalle"),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA()()(),e.TgZ(21,"div",19)(22,"div",20)(23,"small"),e._uU(24,"Fecha de redenci\xf3n"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"date"),e.qZA()()()(),e.TgZ(28,"div",21),e.YNc(29,Re,2,1,"a",22),e.YNc(30,je,2,0,"a",23),e.qZA()}if(2&i){const t=e.oxw();e.xp6(8),e.hij("Colaborador: ",t.modalData.event.title,""),e.xp6(7),e.Oqu(t.modalData.event.meta.benefits.name),e.xp6(5),e.Oqu(t.modalData.event.meta.benefit_detail.name),e.xp6(6),e.Oqu(e.xi3(27,6,t.modalData.event.meta.benefit_begin_time,"medium")),e.xp6(3),e.Q6J("ngIf",t.isAdmin),e.xp6(1),e.Q6J("ngIf",t.isAdmin)}}const se={primary:{primary:"#37a91b",secondary:"#55ffbb"},secondary:{primary:"#888888",secondary:"#bbbbbb"}};let Ge=(()=>{class i{constructor(t,n,a){this.modal=t,this.benefitUserService=n,this.authService=a,this.view=C.wr.Month,this.CalendarView=C.wr,this.viewDate=new Date,this.isAdmin=!1,this.refresh=new Ye.x,this.events=[],this.activeDayIsOpen=!1}ngOnInit(){this.authService.validarAdmin().subscribe({next:t=>{this.isAdmin=t.admin},error:t=>{g().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",g().stopTimer),n.addEventListener("mouseleave",g().resumeTimer)}})}})}ngOnChanges(t){this.addEventsToCalendar(this.data)}dayClicked({date:t,events:n}){(0,qe.Z)(t,this.viewDate)?(this.activeDayIsOpen=!((0,Oe.Z)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===n.length),this.viewDate=t):(this.viewDate=t,this.activeDayIsOpen=!1)}eventTimesChanged({event:t,newStart:n,newEnd:a}){this.events=this.events.map(s=>s===t?{...t,start:n,end:a}:s)}handleEvent(t,n){this.modalData={event:n,action:t},this.modal.open(this.modalContent,{size:"lg"})}setView(t){this.view=t}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}addEventsToCalendar(t){this.events=[],t?.flat().forEach(n=>{let{benefit_user:a}=n;a.forEach(s=>{("Mi Viernes"===s.benefits.name||"Mi Banco de Horas"===s.benefits.name||"Mi Cumplea\xf1os"===s.benefits.name)&&(this.events=[...this.events,{title:n.name+" - "+s.benefits.name+" - "+s.benefit_detail.name,start:new Date(s.benefit_begin_time),end:new Date(s.benefit_end_time),color:n.id===Number.parseInt(localStorage.getItem("uid"))?se.primary:se.secondary,draggable:!1,meta:s}])})})}deleteBenefit(t){g().fire({title:"Eliminar beneficio?",text:"Confirme que desea eliminar el beneficio.",icon:"question",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOutUp"},showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed&&this.benefitUserService.destroy(this.modalData.event.meta.id).subscribe({next:()=>{this.events=this.events.filter(a=>a.meta.id!==t),this.refresh.next(),this.modal.dismissAll(),this.activeDayIsOpen=!1},error:a=>console.log(a)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.FF),e.Y36(q),e.Y36(O.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["calendar-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(Qe,7),2&t){let a;e.iGM(a=e.CRH())&&(n.modalContent=a.first)}},inputs:{data:"data"},features:[e.TTD],decls:28,vars:20,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventTimesChanged","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","refresh","eventTimesChanged","eventClicked",4,"ngSwitchCase"],["modalContent",""],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventTimesChanged","eventClicked"],[3,"viewDate","events","refresh","eventTimesChanged","eventClicked"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-6"],[1,"modal-footer"],["class","btn btn-warning",3,"href",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"href"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("viewDateChange",function(s){return n.viewDate=s})("viewDateChange",function(){return n.closeOpenMonthViewDay()}),e._uU(4," Anterior "),e.qZA(),e.TgZ(5,"div",4),e.NdJ("viewDateChange",function(s){return n.viewDate=s}),e._uU(6," Hoy "),e.qZA(),e.TgZ(7,"div",5),e.NdJ("viewDateChange",function(s){return n.viewDate=s})("viewDateChange",function(){return n.closeOpenMonthViewDay()}),e._uU(8," Siguiente "),e.qZA()()(),e.TgZ(9,"div",1)(10,"h3"),e._uU(11),e.ALo(12,"calendarDate"),e.qZA()(),e.TgZ(13,"div",1)(14,"div",2)(15,"div",6),e.NdJ("click",function(){return n.setView(n.CalendarView.Month)}),e._uU(16," Mes "),e.qZA(),e.TgZ(17,"div",6),e.NdJ("click",function(){return n.setView(n.CalendarView.Week)}),e._uU(18," Semana "),e.qZA(),e.TgZ(19,"div",6),e.NdJ("click",function(){return n.setView(n.CalendarView.Day)}),e._uU(20," D\xeda "),e.qZA()()()(),e._UZ(21,"br"),e.TgZ(22,"div",7),e.YNc(23,He,1,4,"mwl-calendar-month-view",8),e.YNc(24,$e,1,3,"mwl-calendar-week-view",9),e.YNc(25,Ve,1,3,"mwl-calendar-day-view",9),e.qZA(),e.YNc(26,Pe,31,9,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(3),e.Q6J("view",n.view)("viewDate",n.viewDate),e.xp6(2),e.Q6J("viewDate",n.viewDate),e.xp6(2),e.Q6J("view",n.view)("viewDate",n.viewDate),e.xp6(4),e.Oqu(e.Dn7(12,16,n.viewDate,n.view+"ViewTitle","en")),e.xp6(4),e.ekj("active",n.view===n.CalendarView.Month),e.xp6(2),e.ekj("active",n.view===n.CalendarView.Week),e.xp6(2),e.ekj("active",n.view===n.CalendarView.Day),e.xp6(3),e.Q6J("ngSwitch",n.view),e.xp6(1),e.Q6J("ngSwitchCase",n.CalendarView.Month),e.xp6(1),e.Q6J("ngSwitchCase",n.CalendarView.Week),e.xp6(1),e.Q6J("ngSwitchCase",n.CalendarView.Day))},dependencies:[C.YX,C.MG,C.nA,C.GH,C.TK,C.Se,v.O5,v.RF,v.n9,C.vk,v.uU],encapsulation:2,changeDetection:0}),i})(),We=(()=>{class i{constructor(){this.doughnutChartLabels=["Usadas","Disponibles"],this.doughnutChartData={labels:this.doughnutChartLabels,datasets:[{data:[this.totalBancoHoras,16-this.totalBancoHoras],backgroundColor:["#C8102E","gray"],hoverBackgroundColor:["#D8102E","darkgray"]}]},this.doughnutChartType="doughnut"}ngOnChanges(t){this.doughnutChartData.datasets[0].data=[this.totalBancoHoras,16-this.totalBancoHoras],this.chart?.chart?.update()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["doughnut-chart-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(A.jh,5),2&t){let a;e.iGM(a=e.CRH())&&(n.chart=a.first)}},inputs:{totalBancoHoras:"totalBancoHoras"},features:[e.TTD],decls:1,vars:2,consts:[["baseChart","",1,"chart",3,"data","type"]],template:function(t,n){1&t&&e._UZ(0,"canvas",0),2&t&&e.Q6J("data",n.doughnutChartData)("type",n.doughnutChartType)},dependencies:[A.jh],encapsulation:2}),i})();function Le(i,r){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t),e.xp6(1),e.hij("",t," ")}}function ze(i,r){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.MGl("value"," ",null==t?null:t.id,""),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Ke(i,r){if(1&i&&(e.ynx(0),e.YNc(1,ze,2,2,"option",8),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.users)}}function Xe(i,r){if(1&i&&(e.TgZ(0,"option",18),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.MGl("value"," ",t.id,""),e.xp6(1),e.hij(" ",t.name," ")}}function et(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"option",18),e._uU(2),e.qZA(),e.YNc(3,Xe,2,2,"option",8),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.MGl("value"," ",null==t.user?null:t.user.id,""),e.xp6(1),e.hij(" ",null==t.user?null:t.user.name," "),e.xp6(1),e.Q6J("ngForOf",null==t.user?null:t.user.subordinates)}}function tt(i,r){1&i&&e._UZ(0,"div")}function it(i,r){1&i&&e._UZ(0,"img",34)}function nt(i,r){1&i&&e._UZ(0,"img",35)}function rt(i,r){1&i&&e._UZ(0,"img",36)}function at(i,r){1&i&&e._UZ(0,"img",37)}function st(i,r){1&i&&e._UZ(0,"img",38)}function ot(i,r){if(1&i&&(e.TgZ(0,"div",39)(1,"div",40),e._UZ(2,"doughnut-chart-component",41),e.qZA(),e.TgZ(3,"div",42),e._UZ(4,"bar-chart-component",43),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("totalBancoHoras",t.totalBancoHoras),e.xp6(2),e.Q6J("input",t.bancosHoras)}}function lt(i,r){if(1&i&&(e.TgZ(0,"div")(1,"div",23)(2,"div",24),e.YNc(3,it,1,0,"img",25),e.YNc(4,nt,1,0,"img",26),e.YNc(5,rt,1,0,"img",27),e.YNc(6,at,1,0,"img",28),e.YNc(7,st,1,0,"img",29),e.qZA(),e.TgZ(8,"div",30)(9,"div",31),e._uU(10),e.qZA(),e._UZ(11,"ul",32),e.qZA()(),e.YNc(12,ot,5,2,"div",33),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","Mi Cumplea\xf1os"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Banco de Horas"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Horario Flexible"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Viernes"),e.xp6(1),e.Q6J("ngSwitchCase","Tiempo para el Viajero"),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("innerHTML",n.selectBenefit(t.id),e.oJD),e.xp6(1),e.Q6J("ngIf","Mi Banco de Horas"===t.name)}}function dt(i,r){if(1&i){const t=e.EpF();e._UZ(0,"hr"),e.TgZ(1,"div",19)(2,"div",20)(3,"h2"),e._uU(4),e.qZA(),e.TgZ(5,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closePanel())}),e.qZA()(),e.YNc(6,lt,13,9,"div",22),e.qZA()}if(2&i){const t=e.oxw();e.xp6(4),e.hij("Detalle de beneficios de ",null==t.currentUserBenefits?null:t.currentUserBenefits.name,""),e.xp6(2),e.Q6J("ngForOf",t.benefits)}}let ut=(()=>{class i{constructor(t,n,a,s,o,l){this.fb=t,this.benefitUserService=n,this.benefitService=a,this.userService=s,this.router=o,this.authService=l,this.bancosHoras=[0,0,0,0,0,0,0,0,0,0,0,0],this.isAdmin=!1,this.totalBancoHoras=0,this.viewBenefitUser=this.fb.group({years:[(new Date).getFullYear().toString(),p.kI.required],users:["",p.kI.required]}),this.years=[];const u=(new Date).getFullYear();for(let d=u;d>u-5;d--)this.years.push(d)}ngOnInit(){this.authService.validarAdmin().subscribe({next:t=>{this.isAdmin=t.admin,this.isAdmin?this.userService.index().subscribe({next:n=>{this.users=n},error:n=>{this.router.navigateByUrl("benefit-employee"),g().fire({title:"Error",icon:"error",html:n.error.msg,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",g().stopTimer),a.addEventListener("mouseleave",g().resumeTimer)}})}}):this.userService.show(Number.parseInt(localStorage.getItem("uid"))).subscribe({next:n=>{this.user=Object.values(n)[0]},error:n=>{this.router.navigateByUrl("benefit-employee"),g().fire({title:"Error",icon:"error",html:n.error.msg,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",g().stopTimer),a.addEventListener("mouseleave",g().resumeTimer)}})}})}}),this.benefitService.index().subscribe(t=>this.benefits=t),this.benefitUserService.index(Number.parseInt(localStorage.getItem("uid")),this.viewBenefitUser.get("years")?.value).subscribe(t=>{this.allUsersBenefits=t,this.calendarData=this.allUsersBenefits})}getBenefitDetail(t){this.viewBenefitUser.get("years")?.value&&this.viewBenefitUser.get("users")?.value&&this.benefitUserService.index(Number.parseInt(localStorage.getItem("uid")),this.viewBenefitUser.get("years")?.value).subscribe(n=>{this.allUsersBenefits=n,this.currentUserBenefits=this.allUsersBenefits.find(s=>s.id===Number.parseInt(this.viewBenefitUser.controls.users.value)),this.calendarData=this.allUsersBenefits,this.bancosHoras=this.bancosHoras.map(s=>0),this.currentUserBenefits.benefit_user.filter(s=>"Mi Banco de Horas"===s.benefits.name).map(s=>{this.bancosHoras[new Date(s.benefit_begin_time).getMonth()]+=s.benefit_detail.time_hours||0})})}selectBenefit(t){let n=this.currentUserBenefits?.benefit_user.filter(a=>a.benefit_id===t);if(n?.length){let a="";switch(n[0].benefits.name){case"Mi Cumplea\xf1os":return n?`<li class="list-group-item">\n              Fecha de redenci\xf3n: ${new v.uU("en-US").transform(n[0].benefit_begin_time,"dd/MM/yyyy, hh:mm a")}\n            </li>`:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Banco de Horas":return this.totalBancoHoras=(new P).transform(n),n.forEach(s=>{a+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}: ${s.benefit_detail.time_hours} horas\n            </li>`}),n?a:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Horario Flexible":case"Tiempo para el Viajero":return n?`<li class="list-group-item">\n                ${n[0].benefit_detail.name}\n              </li>`:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Viernes":return n.forEach(s=>{a+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}: ${s.benefit_detail.time_hours} horas\n            </li>`}),n?a:'<li class="list-group-item">No se encontraron beneficios registrados</li>'}}return this.totalBancoHoras=0,'<li class="list-group-item">No se encontraron beneficios registrados</li>'}closePanel(){this.viewBenefitUser.controls.users.setValue("")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.qu),e.Y36(q),e.Y36(G.T),e.Y36(W.K),e.Y36(B.F0),e.Y36(O.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefitemployee-index"]],decls:27,vars:7,consts:[[1,"row","mt-5"],[1,"col"],[3,"formGroup"],[1,"row","p-3"],[1,"col-sm-4","my-1","my-sm-0"],[1,"input-group"],["for","years",1,"input-group-text"],["formControlName","years",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-8","my-1","my-sm-0"],["for","user",1,"input-group-text"],["formControlName","users",1,"form-select",3,"change"],["value",""],[4,"ngIf"],[4,"ngIf","ngIfThen"],[1,"row","p-3","bg-light","rounded","shadow"],[3,"data"],["newBenefitDetailTemplate",""],[3,"value"],[1,"row","shadow","rounded","mb-3","pb-3","bg-light"],[1,"d-flex","flex-row","justify-content-between","align-items-center"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[4,"ngFor","ngForOf"],[1,"input-group","mt-3"],[1,"input-group-text",2,"width","20%",3,"ngSwitch"],["src","./assets/images/cumplea\xf1os.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/banco_horas.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/horario_flexible.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/mi_viernes.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/tiempo_viajero.svg","width","100%;",4,"ngSwitchCase"],[1,"form-control"],[1,"card-header"],[1,"list-group","list-group-flush",3,"innerHTML"],["class","row",4,"ngIf"],["src","./assets/images/cumplea\xf1os.svg","width","100%;"],["src","./assets/images/banco_horas.svg","width","100%;"],["src","./assets/images/horario_flexible.svg","width","100%;"],["src","./assets/images/mi_viernes.svg","width","100%;"],["src","./assets/images/tiempo_viajero.svg","width","100%;"],[1,"row"],[1,"col-4"],[3,"totalBancoHoras"],[1,"col-8"],[3,"input"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"A\xf1o"),e.qZA(),e.TgZ(8,"select",7),e.NdJ("change",function(s){return n.getBenefitDetail(s)}),e.YNc(9,Le,2,2,"option",8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",5)(12,"label",10),e._uU(13,"Colaborador"),e.qZA(),e.TgZ(14,"select",11),e.NdJ("change",function(s){return n.getBenefitDetail(s)}),e.TgZ(15,"option",12),e._uU(16,"-- Seleccione un colaborador --"),e.qZA(),e.YNc(17,Ke,2,1,"ng-container",13),e.YNc(18,et,4,3,"ng-container",13),e.qZA()()()()()()(),e.YNc(19,tt,1,0,"div",14),e._UZ(20,"hr"),e.TgZ(21,"div",15)(22,"h2"),e._uU(23,"Calendario de beneficios MiViernes - Mis colaboradores"),e.qZA(),e._UZ(24,"calendar-component",16),e.qZA(),e.YNc(25,dt,7,2,"ng-template",null,17,e.W1O)),2&t){const a=e.MAs(26);e.xp6(2),e.Q6J("formGroup",n.viewBenefitUser),e.xp6(7),e.Q6J("ngForOf",n.years),e.xp6(8),e.Q6J("ngIf",n.isAdmin),e.xp6(1),e.Q6J("ngIf",!n.isAdmin),e.xp6(1),e.Q6J("ngIf",n.viewBenefitUser.valid)("ngIfThen",a),e.xp6(5),e.Q6J("data",n.calendarData)}},dependencies:[v.sg,v.O5,v.RF,v.n9,p._Y,p.YN,p.Kr,p.EJ,p.JJ,p.JL,p.sg,p.u,Je,Ge,We],encapsulation:2}),i})(),ct=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefitemployee-show"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"show works!"),e.qZA())},encapsulation:2}),i})();var ft=h(9906),mt=h(4128),oe=h(3900),ht=h(8505),pt=h(9358),x=h(206);function vt(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function _t(i,r){1&i&&(e.TgZ(0,"span",27),e._UZ(1,"i",28),e.qZA())}function gt(i,r){if(1&i&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.userIdErrors)}}function bt(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function Ct(i,r){1&i&&(e.TgZ(0,"span",27),e._UZ(1,"i",28),e.qZA())}function yt(i,r){if(1&i&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.benefitIdErrors)}}function wt(i,r){if(1&i&&(e.TgZ(0,"option",26),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name,"")}}function xt(i,r){1&i&&(e.TgZ(0,"span",27),e._UZ(1,"i",28),e.qZA())}function Tt(i,r){if(1&i&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.benefitDetailIdErrors)}}function Zt(i,r){if(1&i&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.datePickerErrors)}}function Dt(i,r){if(1&i&&(e.TgZ(0,"small",29),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.timePickerErrors)}}const I=function(i){return{invalid:i}},$=i=>i<10?`0${i}`:`${i}`;let At=(()=>{class i extends y.Cw{fromModel(t){if(!t)return null;const n=t.split(":");return{hour:parseInt(n[0],10),minute:parseInt(n[1],10),second:parseInt(n[2],10)}}toModel(t){return null!=t?`${$(t.hour)}:${$(t.minute)}:${$(t.second)}`:null}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(i)))(n||i)}}(),i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),le=(()=>{class i{get userIdErrors(){return(this.createForm.get("user_id")?.errors).required?"El campo es obligatorio":""}get benefitIdErrors(){return(this.createForm.get("benefit_id")?.errors).required?"El campo es obligatorio":""}get benefitDetailIdErrors(){return(this.createForm.get("benefit_detail_id")?.errors).required?"El campo es obligatorio":""}get datePickerErrors(){return(this.createForm.get("model")?.errors).required?"El campo es obligatorio":""}get timePickerErrors(){return(this.createForm.get("time")?.errors).required?"El campo es obligatorio":""}constructor(t,n,a,s,o,l,u,d,c,m){this.activatedRoute=t,this.as=n,this.authService=a,this.benefitService=s,this.benefitUserService=o,this.changeDetectorRef=l,this.fb=u,this.ngbCalendar=d,this.userService=c,this.router=m,this.benefitDetailSpinner=!0,this.createForm=this.fb.group({benefit_begin_time:[""],benefit_detail_id:[{value:"",disabled:!0},p.kI.required],benefit_end_time:[""],benefit_id:[{value:"",disabled:!0},p.kI.required],model:["",p.kI.required],time:["",p.kI.required],user_id:[{value:"",disabled:!0},p.kI.required]}),this.disableSubmitBtn=!1,this.meridian=!0,this.userAndBenefitSpinner=!0,this.isDayDisabled=b=>6===this.ngbCalendar.getWeekday(b)||7===this.ngbCalendar.getWeekday(b)}ngOnInit(){(0,mt.D)({validarAdmin:this.authService.validarAdmin().pipe((0,oe.w)(t=>t?this.userService.index():this.userService.show(Number.parseInt(localStorage.getItem("uid"))))),loadBenefits:this.benefitService.index().pipe((0,ht.b)(t=>{this.benefits=t,this.createForm.get("benefit_id")?.enable(),this.userAndBenefitSpinner=!1}))}).subscribe({next:({validarAdmin:t})=>{this.users=Object.values(t),this.createForm.get("user_id")?.enable(),this.router.url.includes("edit")&&this.activatedRoute.params.pipe((0,oe.w)(({id:a})=>this.benefitUserService.show(a))).subscribe(a=>{this.currentUserBenefits=Object.values(a)[0],this.createForm.get("benefit_id")?.setValue(this.currentUserBenefits.benefit_user[0].benefits.id),this.dp?.navigateTo({year:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getFullYear(),month:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMonth()+1}),this.createForm.get("model")?.setValue({year:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getFullYear(),month:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMonth()+1,day:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getDate()}),this.tp?.updateHour(new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getHours().toString()),this.tp?.updateMinute(new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMinutes().toString()),this.createForm.get("user_id")?.setValue(this.currentUserBenefits.id),this.fillBenefitDetail(this.currentUserBenefits.benefit_user[0].benefits.id)})},error:t=>{this.router.navigateByUrl("benefit-employee"),g().fire({title:"Error",icon:"error",html:t.error.message,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",g().stopTimer),n.addEventListener("mouseleave",g().resumeTimer)}})}}),this.createForm.get("benefit_detail_id").valueChanges.subscribe(t=>{this.selectedBenefitDetail=this.benefit_details?.find(n=>n.id===Number.parseInt(t||0))})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}campoEsValido(t){return this.createForm.controls[t].errors&&this.createForm.controls[t].touched}save(){if(this.createForm.invalid)return void this.createForm.markAllAsTouched();let t=`${this.createForm.get("model")?.value.year}-${this.createForm.get("model")?.value.month}-${this.createForm.get("model")?.value.day} ${this.createForm.get("time")?.value}`;this.createForm.get("benefit_begin_time")?.setValue((0,v.p6)(new Date(t),"yyyy-MM-dd HH:mm:ss","en-US")),this.createForm.get("benefit_end_time")?.setValue((0,v.p6)((0,pt.Z)(new Date(t),this.selectedBenefitDetail.time_hours).toString(),"yyyy-MM-dd HH:mm:ss","en-US")),this.currentUserBenefits?.id?this.benefitUserService.update(this.currentUserBenefits.benefit_user[0].id,this.createForm.value).subscribe({next:()=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(x.fI.ACTUALIZADO,x.gW.SUCCESS)},error:({error:n})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(x.fI.ERROR,x.gW.ERROR,n.message)}}):this.benefitUserService.create(this.createForm.value).subscribe({next:()=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(x.fI.CREADO,x.gW.SUCCESS),this.createForm.reset()},error:({error:n})=>{this.as.subscriptionAlert(x.fI.ERROR,x.gW.ERROR,n.message),this.disableSubmitBtn=!1}}),this.disableSubmitBtn=!0}fillBenefitDetail(t){this.createForm.get("benefit_detail_id").reset(""),this.benefitDetailSpinner=!1,this.benefitService.show(t.target?.value||t).subscribe(n=>{this.benefit_details=Object.values(n)[0].benefit_detail,this.createForm.get("benefit_id").valid&&(this.benefitDetailSpinner=!0,this.createForm.get("benefit_detail_id").enable()),this.router.url.includes("edit")&&this.createForm.get("benefit_detail_id")?.setValue(this.currentUserBenefits.benefit_user[0].benefit_detail.id)}),this.isDayDisabled="Mi Viernes"==t.target.options[t.target.options.selectedIndex].text?n=>5!==this.ngbCalendar.getWeekday(n):n=>6===this.ngbCalendar.getWeekday(n)||7===this.ngbCalendar.getWeekday(n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B.gz),e.Y36(x.c9),e.Y36(O.e),e.Y36(G.T),e.Y36(q),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(y.vL),e.Y36(W.K),e.Y36(B.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefitemployee-create"]],viewQuery:function(t,n){if(1&t&&(e.Gf(y.VL,5),e.Gf(y.Pm,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.dp=a.first),e.iGM(a=e.CRH())&&(n.tp=a.first)}},decls:52,vars:34,consts:[[1,"row","mt-5"],[1,"col"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-xl-9","px-2","d-flex","flex-column","justify-content-evenly"],[1,"row"],["for","user_id"],[1,"input-group"],["formControlName","user_id","id","user_id",1,"form-select",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","input-group-text","id","basic-addon1",4,"ngIf"],["class","text-danger",4,"ngIf"],["for","benefit_id"],["formControlName","benefit_id","id","benefit_id",1,"form-select",3,"ngClass","change"],["for","benefit_detail_id"],["formControlName","benefit_detail_id","id","benefit_detail_id",1,"form-select",3,"ngClass"],[1,"col-xl-3","px-2","d-flex","flex-column"],["formControlName","model",1,"m-2",3,"ngClass","markDisabled","navigate"],["dp",""],["formControlName","time",1,"m-2","d-flex","justify-content-around",3,"ngClass","meridian"],["tp",""],["type","hidden","formControlName","benefit_begin_time",3,"value"],["type","hidden","formControlName","benefit_end_time"],[1,"mb-3"],["type","submit",1,"btn","btn-success","float-end",3,"disabled"],[3,"value"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"],[1,"text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"label",6),e._uU(10,"Selecciona un colaborador"),e.qZA(),e.TgZ(11,"div",7)(12,"select",8)(13,"option",9),e._uU(14,"-- Seleccione Colaborador --"),e.qZA(),e.YNc(15,vt,2,2,"option",10),e.qZA(),e.YNc(16,_t,2,0,"span",11),e.qZA(),e.YNc(17,gt,2,1,"small",12),e.qZA(),e.TgZ(18,"div",5)(19,"label",13),e._uU(20,"Selecciona un beneficio"),e.qZA(),e.TgZ(21,"div",7)(22,"select",14),e.NdJ("change",function(s){return n.fillBenefitDetail(s)}),e.TgZ(23,"option",9),e._uU(24,"-- Seleccione Beneficio --"),e.qZA(),e.YNc(25,bt,2,2,"option",10),e.qZA(),e.YNc(26,Ct,2,0,"span",11),e.qZA(),e.YNc(27,yt,2,1,"small",12),e.qZA(),e.TgZ(28,"div",5)(29,"label",15),e._uU(30,"Selecciona un Detalle"),e.qZA(),e.TgZ(31,"div",7)(32,"select",16)(33,"option",9),e._uU(34,"-- Seleccione Detalle --"),e.qZA(),e.YNc(35,wt,2,2,"option",10),e.qZA(),e.YNc(36,xt,2,0,"span",11),e.qZA(),e.YNc(37,Tt,2,1,"small",12),e.qZA()(),e.TgZ(38,"div",17)(39,"div",5)(40,"ngb-datepicker",18,19),e.NdJ("navigate",function(s){return n.date=s.next}),e.qZA(),e.YNc(42,Zt,2,1,"small",12),e.qZA(),e.TgZ(43,"div",5),e._UZ(44,"ngb-timepicker",20,21),e.YNc(46,Dt,2,1,"small",12),e.qZA()()(),e._UZ(47,"input",22)(48,"input",23),e.TgZ(49,"div",24)(50,"button",25),e._uU(51),e.qZA()()()()()),2&t&&(e.xp6(2),e.AsE("",null!=n.currentUserBenefits&&n.currentUserBenefits.id?"Actualizar":"Nuevo"," beneficio para ",null==n.currentUserBenefits?null:n.currentUserBenefits.name,""),e.xp6(3),e.Q6J("formGroup",n.createForm),e.xp6(7),e.Q6J("ngClass",e.VKq(24,I,n.campoEsValido("user_id"))),e.xp6(3),e.Q6J("ngForOf",n.users),e.xp6(1),e.Q6J("ngIf",n.userAndBenefitSpinner),e.xp6(1),e.Q6J("ngIf",n.campoEsValido("user_id")),e.xp6(5),e.Q6J("ngClass",e.VKq(26,I,n.campoEsValido("benefit_id"))),e.xp6(3),e.Q6J("ngForOf",n.benefits),e.xp6(1),e.Q6J("ngIf",n.userAndBenefitSpinner),e.xp6(1),e.Q6J("ngIf",n.campoEsValido("benefit_id")),e.xp6(5),e.Q6J("ngClass",e.VKq(28,I,n.campoEsValido("benefit_detail_id"))),e.xp6(3),e.Q6J("ngForOf",n.benefit_details),e.xp6(1),e.Q6J("ngIf",!n.benefitDetailSpinner),e.xp6(1),e.Q6J("ngIf",n.campoEsValido("benefit_detail_id")),e.xp6(3),e.Q6J("ngClass",e.VKq(30,I,n.campoEsValido("model")))("markDisabled",n.isDayDisabled),e.xp6(2),e.Q6J("ngIf",n.campoEsValido("model")),e.xp6(2),e.Q6J("ngClass",e.VKq(32,I,n.campoEsValido("time")))("meridian",n.meridian),e.xp6(2),e.Q6J("ngIf",n.campoEsValido("time")),e.xp6(1),e.s9C("value",n.benefit_begin_time),e.xp6(3),e.Q6J("disabled",n.disableSubmitBtn),e.xp6(1),e.hij(" ",null!=n.currentUserBenefits&&n.currentUserBenefits.id?"Actualizar":"Crear"," "))},dependencies:[v.mk,v.sg,v.O5,y.VL,y.Pm,p._Y,p.YN,p.Kr,p.Fj,p.EJ,p.JJ,p.JL,p.sg,p.u],encapsulation:2}),i})();const Bt=[{path:"",component:ft.t,children:[{path:"index",component:ut},{path:"edit/:id",component:le},{path:"show/:id",component:ct},{path:"create",component:le},{path:"**",redirectTo:"index"}]}];let Ut=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[B.Bz.forChild(Bt),B.Bz]}),i})(),St=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[P,{provide:y.Cw,useClass:At}],imports:[Ut,C._8.forRoot({provide:C._A,useFactory:fe.x}),v.ez,y.M,y.UL,A.vQ,p.UX,p.u5]}),i})()}}]);