"use strict";(self.webpackChunksalarioemocionalfrontend=self.webpackChunksalarioemocionalfrontend||[]).push([[431],{6431:(Q,b,o)=>{o.r(b),o.d(b,{BenefitDetailModule:()=>L});var c=o(4755),l=o(9401),g=o(5415),d=o(5118),a=o(206),T=o(2369),e=o(2223),f=o(8473);let A=(()=>{class i{constructor(t,n,s,p){this.as=t,this.benefitDetailService=n,this.renderer=s,this.router=p,this.columns=[{title:"Nombre",data:"name"},{title:"Beneficio Asociado",data:function(u,h,V){return u.benefit.map(Z=>`<a style="cursor: pointer;" class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover px-1"\n          benefit_detail_id="${Z.id}">${Z.name}</a>`).join("|")}},{title:"Opciones",data:function(u,h,V){return`<span style="cursor: pointer;" benefit_detail_options_id="${u.id}" class="badge rounded-pill text-bg-warning">Detalles</span>`}}]}ngOnInit(){this.dtOptions={ajax:(t,n)=>{this.benefitDetailService.index().subscribe({next:s=>{n({data:s})},error:s=>{this.router.navigateByUrl("benefit-employee"),this.as.subscriptionAlert(a.fI.ERROR,a.gW.ERROR,s.error.message)}})},columns:this.columns,responsive:!0,language:T}}ngAfterViewInit(){this.renderer.listen("document","click",t=>{t.target.hasAttribute("benefit_detail_id")&&this.router.navigate(["/benefit/show/"+t.target.getAttribute("benefit_detail_id")]),t.target.hasAttribute("benefit_detail_options_id")&&this.router.navigate(["/benefit-detail/show/"+t.target.getAttribute("benefit_detail_options_id")])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(a.c9),e.Y36(f.a),e.Y36(e.Qsj),e.Y36(d.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefitdetail-index"]],decls:5,vars:1,consts:[[1,"row","mt-5"],[1,"col"],["datatable","",1,"table","table-hover","table-sm",3,"dtOptions"],[1,"bg-dark","text-light"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2),e._UZ(3,"thead",3)(4,"tbody"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("dtOptions",n.dtOptions))},dependencies:[g.G],encapsulation:2}),i})();var v=o(3900),D=o(5226),m=o.n(D),y=o(1768);function S(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"i",12),e.qZA())}function E(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"i",12),e.qZA())}function O(i,r){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"a",16),e._uU(3),e.qZA()()()),2&i){const t=r.$implicit;e.xp6(2),e.MGl("routerLink","/benefit/show/",t.id,""),e.xp6(1),e.Oqu(t.name)}}function B(i,r){if(1&i&&(e.TgZ(0,"table",13)(1,"thead",14)(2,"tr")(3,"th"),e._uU(4,"Beneficio al que pertenece"),e.qZA()()(),e.TgZ(5,"tbody"),e.YNc(6,O,4,2,"tr",15),e.qZA()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.benefitDetail.benefit)}}const F=function(i){return{disabled:i}};let w=(()=>{class i{constructor(t,n,s){this.benefitDetailService=t,this.activatedRoute=n,this.router=s,this.benefitDetail={name:"",time_hours:0,created_at:new Date,updated_at:new Date,benefit:[]},this.loaded=!1}ngOnInit(){this.activatedRoute.params.pipe((0,v.w)(({id:t})=>this.benefitDetailService.show(t))).subscribe({next:t=>{this.benefitDetail=Object.values(t)[0],this.loaded=!0},error:t=>{this.router.navigateByUrl("benefit-employee"),m().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",m().stopTimer),n.addEventListener("mouseleave",m().resumeTimer)}})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.a),e.Y36(d.gz),e.Y36(d.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefitdetail-show"]],decls:18,vars:8,consts:[[1,"row","mt-5"],[1,"col"],[1,"row","p-5"],[1,"col-12","d-flex","flex-column"],[4,"ngIf"],[1,"form-text"],[1,"col-12"],[4,"ngIf","ngIfElse"],[1,"btn-group","float-end","mt-5","mb-5"],["backButton","",1,"btn"],["aria-current","page",1,"btn","btn-warning",3,"routerLink","ngClass"],["benefitdetail",""],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"],[1,"table","table-hover","table-sm"],[1,"bg-dark","text-light"],[4,"ngFor","ngForOf"],[1,"link-primary","link-offset-2","link-underline-opacity-25","link-underline-opacity-100-hover",3,"routerLink"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,S,2,0,"div",4),e._uU(5),e.TgZ(6,"span",5),e._uU(7,"Nombre"),e.qZA()()(),e.TgZ(8,"div",2)(9,"div",6),e.YNc(10,E,2,0,"div",7),e.qZA()(),e.TgZ(11,"div",8)(12,"button",9),e._uU(13,"Volver"),e.qZA(),e.TgZ(14,"a",10),e._uU(15,"Editar"),e.qZA()()()(),e.YNc(16,B,7,1,"ng-template",null,11,e.W1O)),2&t){const s=e.MAs(17);e.xp6(4),e.Q6J("ngIf",!n.loaded),e.xp6(1),e.hij(" ",n.benefitDetail.name," "),e.xp6(5),e.Q6J("ngIf",!n.loaded)("ngIfElse",s),e.xp6(4),e.MGl("routerLink","/benefit-detail/edit/",n.benefitDetail.id,""),e.Q6J("ngClass",e.VKq(6,F,!n.loaded))}},dependencies:[d.rH,c.mk,c.sg,c.O5,y.z],encapsulation:2}),i})();var I=o(9906),R=o(7270);function U(i,r){if(1&i&&(e.TgZ(0,"small",10),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.benefitDetailNameErrors)}}function _(i,r){if(1&i&&(e.TgZ(0,"small",10),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.timeHoursErrors)}}const C=function(i){return{invalid:i}};let x=(()=>{class i{get benefitFormGroup(){return this.createForm.controls.benefitFormGroup}get benefitDetailNameErrors(){return(this.createForm.get("name")?.errors).minlength?"El nombre no cumple con el largo m\xednimo de 5 caracteres":""}get timeHoursErrors(){const t=this.createForm.get("time_hours")?.errors;return t.minIfFilled?t.minIfFilled:""}constructor(t,n,s,p,u,h){this.activatedRoute=t,this.as=n,this.benefitDetailService=s,this.fb=p,this.router=u,this.validatorService=h,this.benefitDetail={name:"",created_at:new Date,updated_at:new Date,benefit_detail:[]},this.createForm=this.fb.group({name:["",[l.kI.required,l.kI.minLength(5)]],time_hours:["",[this.validatorService.minIfFilled(0)]]}),this.disableSubmitBtn=!1}ngOnInit(){this.benefitDetailService.index().subscribe({error:t=>{this.router.navigateByUrl("benefit-employee"),m().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",m().stopTimer),n.addEventListener("mouseleave",m().resumeTimer)}})}}),this.router.url.includes("edit")&&this.activatedRoute.params.pipe((0,v.w)(({id:t})=>this.benefitDetailService.show(t))).subscribe({next:t=>{const n=Object.values(t)[0];this.benefitDetail=n,this.createForm.get("name")?.setValue(n.name),this.createForm.get("time_hours")?.setValue(n.time_hours)},error:({error:t})=>{this.router.navigateByUrl("benefit-employee"),m().fire({title:"Error",icon:"error",html:t.msg,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",m().stopTimer),n.addEventListener("mouseleave",m().resumeTimer)}})}})}campoEsValido(t){return this.createForm.controls[t].errors&&this.createForm.controls[t].touched}save(){this.createForm.invalid?this.createForm.markAllAsTouched():(this.benefitDetail.id?this.benefitDetailService.update(this.benefitDetail.id,this.createForm.value).subscribe({next:()=>{this.router.navigateByUrl(`/benefit-detail/show/${this.benefitDetail.id}`),this.as.subscriptionAlert(a.fI.ACTUALIZADO,a.gW.SUCCESS)},error:({error:t})=>{this.as.subscriptionAlert(a.fI.ERROR,a.gW.ERROR,t.message),this.disableSubmitBtn=!1}}):this.benefitDetailService.create(this.createForm.value).subscribe({next:({id:t})=>{this.router.navigateByUrl(`/benefit-detail/show/${t}`),this.as.subscriptionAlert(a.fI.CREADO,a.gW.SUCCESS)},error:({error:t})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(a.fI.ERROR,a.gW.ERROR,t.message)}}),this.disableSubmitBtn=!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.gz),e.Y36(a.c9),e.Y36(f.a),e.Y36(l.qu),e.Y36(d.F0),e.Y36(R.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefitdetail-create"]],decls:16,vars:11,consts:[[1,"row"],[1,"col"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","formControlName","name","id","name","placeholder","Nombre Completo",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],["for","time_hours",1,"form-label"],["type","number","formControlName","time_hours","id","time_hours","placeholder","Nombre Completo",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-success","float-end",3,"disabled"],[1,"text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.save()}),e.TgZ(3,"div",3)(4,"label",4),e._uU(5,"Nombre del Beneficio"),e.qZA(),e._UZ(6,"input",5),e.YNc(7,U,2,1,"small",6),e.qZA(),e.TgZ(8,"div",3)(9,"label",7),e._uU(10,"Tiempo en horas (Opcional)"),e.qZA(),e._UZ(11,"input",8),e.YNc(12,_,2,1,"small",6),e.qZA(),e.TgZ(13,"div",3)(14,"button",9),e._uU(15),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",n.createForm),e.xp6(4),e.Q6J("ngClass",e.VKq(7,C,n.campoEsValido("name"))),e.xp6(1),e.Q6J("ngIf",n.campoEsValido("name")),e.xp6(4),e.Q6J("ngClass",e.VKq(9,C,n.campoEsValido("time_hours"))),e.xp6(1),e.Q6J("ngIf",n.campoEsValido("time_hours")),e.xp6(2),e.Q6J("disabled",n.disableSubmitBtn),e.xp6(1),e.hij(" ",n.benefitDetail.id?"Actualizar":"Crear"," "))},dependencies:[c.mk,c.O5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u],encapsulation:2}),i})();const Y=[{path:"",component:I.t,children:[{path:"index",component:A},{path:"create",component:x},{path:"edit/:id",component:x},{path:"show/:id",component:w},{path:"**",redirectTo:"index"}]}];let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(Y),d.Bz]}),i})();var N=o(4466);let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[J,c.ez,g.T,l.UX,N.m]}),i})()}}]);