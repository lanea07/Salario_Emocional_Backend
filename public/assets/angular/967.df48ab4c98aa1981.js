"use strict";(self.webpackChunksalarioemocionalfrontend=self.webpackChunksalarioemocionalfrontend||[]).push([[967],{5967:(L,b,s)=>{s.r(b),s.d(b,{BenefitModule:()=>q});var f=s(4755),c=s(5118),x=s(5226),a=s.n(x),e=s(2223),h=s(1239);function Z(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"a",5),e._uU(5," Detalle "),e._UZ(6,"i",6),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.MGl("routerLink","/benefit/show/",t.id,"")}}let T=(()=>{class i{constructor(t,r){this.benefitService=t,this.router=r,this.benefits=[]}ngOnInit(){this.benefitService.index().subscribe({next:t=>{this.benefits=t},error:t=>{this.router.navigateByUrl("benefit-employee"),a().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",a().stopTimer),r.addEventListener("mouseleave",a().resumeTimer)}})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.T),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefit-index"]],decls:11,vars:1,consts:[[1,"row","mt-5"],[1,"col"],[1,"table","table-hover","table-sm"],[1,"bg-dark","text-light"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"fa-solid","fa-circle-info","fa-xs"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"table",2)(3,"thead",3)(4,"tr")(5,"th"),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Opciones"),e.qZA()()(),e.TgZ(9,"tbody"),e.YNc(10,Z,7,2,"tr",4),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngForOf",r.benefits))},dependencies:[f.sg,c.rH],encapsulation:2}),i})();var g=s(3900);function F(i,n){1&i&&(e.TgZ(0,"div"),e._UZ(1,"i",11),e.qZA())}function S(i,n){1&i&&(e.TgZ(0,"div"),e._UZ(1,"i",11),e.qZA())}function A(i,n){if(1&i&&(e.TgZ(0,"tr")(1,"td")(2,"p"),e._uU(3),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(3),e.Oqu(t.name)}}function E(i,n){if(1&i&&(e.TgZ(0,"table",12)(1,"thead",13)(2,"tr")(3,"th"),e._uU(4,"Posibles configuraciones"),e.qZA()()(),e.TgZ(5,"tbody"),e.YNc(6,A,4,1,"tr",14),e.qZA()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",null==t.benefit?null:t.benefit.benefit_detail)}}const O=function(i){return{disabled:i}};let B=(()=>{class i{constructor(t,r,o){this.benefitService=t,this.activatedRoute=r,this.router=o,this.benefit={name:"",created_at:new Date,updated_at:new Date,benefit_detail:[]},this.loaded=!1}ngOnInit(){this.activatedRoute.params.pipe((0,g.w)(({id:t})=>this.benefitService.show(t))).subscribe({next:t=>{this.benefit=Object.values(t)[0],this.details=this.benefit.benefit_detail,this.loaded=!0},error:t=>{this.router.navigateByUrl("benefit-employee"),a().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",a().stopTimer),r.addEventListener("mouseleave",a().resumeTimer)}})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.T),e.Y36(c.gz),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefit-show"]],decls:16,vars:8,consts:[[1,"row","mt-5"],[1,"col"],[1,"row","p-5"],[1,"col-12","d-flex","flex-column"],[4,"ngIf"],[1,"form-text"],[1,"col-12"],[4,"ngIf","ngIfElse"],[1,"btn-group","float-end","mt-5","mb-5"],["aria-current","page",1,"btn","btn-warning",3,"routerLink","ngClass"],["benefitDetail",""],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"],[1,"table","table-hover","table-sm"],[1,"bg-dark","text-light"],[4,"ngFor","ngForOf"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.YNc(4,F,2,0,"div",4),e._uU(5),e.TgZ(6,"span",5),e._uU(7,"Nombre"),e.qZA()()(),e.TgZ(8,"div",2)(9,"div",6),e.YNc(10,S,2,0,"div",7),e.qZA()(),e.TgZ(11,"div",8)(12,"a",9),e._uU(13,"Editar"),e.qZA()()()(),e.YNc(14,E,7,1,"ng-template",null,10,e.W1O)),2&t){const o=e.MAs(15);e.xp6(4),e.Q6J("ngIf",!r.loaded),e.xp6(1),e.hij(" ",r.benefit.name," "),e.xp6(5),e.Q6J("ngIf",!r.loaded)("ngIfElse",o),e.xp6(2),e.MGl("routerLink","/benefit/edit/",r.benefit.id,""),e.Q6J("ngClass",e.VKq(6,O,!r.loaded))}},dependencies:[f.mk,f.sg,f.O5,c.rH],encapsulation:2}),i})();var U=s(9906),l=s(9401),m=s(206),_=s(8473),y=s(7270);function D(i,n){if(1&i&&(e.TgZ(0,"small",11),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.benefitNameErrors)}}function w(i,n){1&i&&(e.TgZ(0,"div"),e._UZ(1,"i",12),e.qZA())}const v=function(i){return{invalid:i}};function I(i,n){if(1&i&&(e.TgZ(0,"div",13)(1,"label",14),e._UZ(2,"input",15),e._uU(3),e.qZA()()),2&i){const t=n.$implicit,r=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(3,v,!r.benefitDetailFormGroup.valid&&r.benefitDetailFormGroup.touched))("formControl",r.benefitDetailFormGroup.get(null==t.id?null:t.id.toString())),e.xp6(1),e.hij(" ",t.name," ")}}let C=(()=>{class i{get benefitDetailFormGroup(){return this.createForm.controls.benefitDetailFormGroup}get benefitNameErrors(){const t=this.createForm.get("name")?.errors;return t.minlength?"El nombre no cumple con el largo m\xednimo de 5 caracteres":t.required?"El campo es obligatorio":""}constructor(t,r,o,d,u,p,J){this.activatedRoute=t,this.as=r,this.benefitDetailService=o,this.benefitService=d,this.fb=u,this.router=p,this.validatorService=J,this.benefit={name:"",created_at:new Date,updated_at:new Date,benefit_detail:[]},this.benefitDetails=[],this.createForm=this.fb.group({name:["",[l.kI.required,l.kI.minLength(5)]]}),this.disableSubmitBtn=!1,this.loaded=!1}ngOnInit(){this.benefitDetailService.index().subscribe({next:t=>{this.benefitDetails=t,this.loaded=!0,this.createForm.addControl("benefitDetailFormGroup",this.buildBenefitDetailFormGroup(t))},error:t=>{this.router.navigateByUrl("benefit-employee"),a().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",a().stopTimer),r.addEventListener("mouseleave",a().resumeTimer)}})}}),this.router.url.includes("edit")&&this.activatedRoute.params.pipe((0,g.w)(({id:t})=>this.benefitService.show(t))).subscribe({next:t=>{const r=Object.values(t)[0];this.benefit=r,this.createForm.get("name")?.setValue(r.name),Object.keys(this.benefitDetailFormGroup.controls).forEach(o=>{Object.values(r.benefit_detail).forEach(d=>{o===d.id.toString()&&this.benefitDetailFormGroup.get(o).setValue(!0)})})},error:({error:t})=>{this.router.navigateByUrl("benefit-employee"),a().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",a().stopTimer),r.addEventListener("mouseleave",a().resumeTimer)}})}})}campoEsValido(t){try{return this.createForm.controls[t].errors&&this.createForm.controls[t].touched}catch{Object.keys(this.benefitDetailFormGroup.controls).forEach(o=>this.benefitDetailFormGroup.get(o).errors&&this.benefitDetailFormGroup.get(o).touched)}}save(){this.createForm.invalid?this.createForm.markAllAsTouched():(this.benefit.id?this.benefitService.update(this.benefit.id,this.createForm.value).subscribe({next:()=>{this.router.navigateByUrl(`/benefit/show/${this.benefit.id}`),this.as.subscriptionAlert(m.fI.ACTUALIZADO,m.gW.SUCCESS)},error:({error:t})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(m.fI.ERROR,m.gW.ERROR,t.message)}}):this.benefitService.create(this.createForm.value).subscribe({next:({id:t})=>{this.router.navigateByUrl(`/benefit/show/${t}`),this.as.subscriptionAlert(m.fI.CREADO,m.gW.SUCCESS)},error:({error:t})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(m.fI.ERROR,m.gW.ERROR,t.message)}}),this.disableSubmitBtn=!0)}buildBenefitDetailFormGroup(t,r=[]){let o=this.fb.group({},{validators:[this.atLeastOneCheckboxCheckedValidator()]});return t.forEach(d=>{let u=r.some(p=>p===d.id);o.addControl(d.id.toString(),this.fb.control(u,{},this.validatorService.checkboxRequired()))}),o}atLeastOneCheckboxCheckedValidator(t=1){return function(o){let d=0;return Object.keys(o.controls).forEach(u=>{o.controls[u].value&&d++}),d<t?{requireCheckboxToBeChecked:!0}:null}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.gz),e.Y36(m.c9),e.Y36(_.a),e.Y36(h.T),e.Y36(l.qu),e.Y36(c.F0),e.Y36(y.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["benefit-create"]],decls:17,vars:9,consts:[[1,"row"],[1,"col"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","name",1,"form-label"],["type","text","formControlName","name","id","name","placeholder","Nombre Completo",1,"form-control",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"form-label"],[4,"ngIf"],["class","col-3 mb-2",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","float-end",3,"disabled"],[1,"text-danger"],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"],[1,"col-3","mb-2"],[1,"form-check-label","ms-2"],["type","checkbox",1,"form-check-input",3,"ngClass","formControl"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return r.save()}),e.TgZ(3,"div",3)(4,"label",4),e._uU(5,"Nombre del Beneficio"),e.qZA(),e._UZ(6,"input",5),e.YNc(7,D,2,1,"small",6),e.qZA(),e.TgZ(8,"div",3)(9,"label",7),e._uU(10,"Detalles de Beneficio Disponibles"),e.qZA(),e.TgZ(11,"div",0),e.YNc(12,w,2,0,"div",8),e.YNc(13,I,4,5,"div",9),e.qZA()(),e.TgZ(14,"div",3)(15,"button",10),e._uU(16),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.createForm),e.xp6(4),e.Q6J("ngClass",e.VKq(7,v,r.campoEsValido("name"))),e.xp6(1),e.Q6J("ngIf",r.campoEsValido("name")),e.xp6(5),e.Q6J("ngIf",!r.loaded),e.xp6(1),e.Q6J("ngForOf",r.benefitDetails),e.xp6(2),e.Q6J("disabled",r.disableSubmitBtn),e.xp6(1),e.hij(" ",r.benefit.id?"Actualizar":"Crear"," "))},dependencies:[f.mk,f.sg,f.O5,l._Y,l.Fj,l.Wl,l.JJ,l.JL,l.oH,l.sg,l.u],encapsulation:2}),i})();const R=[{path:"",component:U.t,children:[{path:"index",component:T},{path:"create",component:C},{path:"edit/:id",component:C},{path:"show/:id",component:B},{path:"**",redirectTo:"index"}]}];let Y=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(R),c.Bz]}),i})(),q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[f.ez,Y,l.UX]}),i})()}}]);