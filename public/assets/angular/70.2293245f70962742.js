"use strict";(self.webpackChunksalarioemocionalfrontend=self.webpackChunksalarioemocionalfrontend||[]).push([[70],{2070:(Dt,V,h)=>{h.r(V),h.d(V,{BenefitEmployeeModule:()=>Tt});var v=h(4755),m=h(9401),b=h(1585),ce=h(5770),D=h(9541),w=h(9089),B=h(5118),e=h(2223);let P=(()=>{class n{transform(t){return t.reduce((r,s)=>r+s.benefit_detail.time_hours,0),t?t.reduce((r,s)=>r+s.benefit_detail.time_hours,0):0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"sum",type:n,pure:!0}),n})();var fe=h(5226),_=h.n(fe),T=h(3144),me=h(2340);let E=(()=>{class n{constructor(t){this.http=t,this.apiBaseUrl=me.N.apiBaseUrl,this.token=localStorage.getItem("token")}index(t,i){const r=(new T.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(`${this.apiBaseUrl}/benefituser?userId=${t}&year=${i}`,{headers:r,withCredentials:!0})}show(t){const i=(new T.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.get(`${this.apiBaseUrl}/benefituser/${t}`,{headers:i,withCredentials:!0})}create(t){const i=(new T.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.post(`${this.apiBaseUrl}/benefituser`,t,{headers:i,withCredentials:!0})}update(t,i){const r=(new T.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.put(`${this.apiBaseUrl}/benefituser/${t}`,i,{headers:r,withCredentials:!0})}destroy(t){const i=(new T.WM).set("Accept","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`);return this.http.delete(`${this.apiBaseUrl}/benefituser/${t}`,{headers:i,withCredentials:!0})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=h(1239),G=h(427),q=h(6518),f=h(1086),O=h(5743),z=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var n=window.screen;if(n)return(n.deviceXDPI||1)/(n.logicalXDPI||1)}return 1}(),U_textSize=function(n,a,t){var l,i=[].concat(a),r=i.length,s=n.font,o=0;for(n.font=t.string,l=0;l<r;++l)o=Math.max(n.measureText(i[l]).width,o);return n.font=s,{height:r*t.lineHeight,width:o}};function H(n,a){var t=a.x,i=a.y;if(null===t)return{x:0,y:-1};if(null===i)return{x:1,y:0};var r=n.x-t,s=n.y-i,o=Math.sqrt(r*r+s*s);return{x:o?r/o:0,y:o?s/o:-1}}var pe=0,L=1,W=2,K=4,X=8;function k(n,a,t){var i=pe;return n<t.left?i|=L:n>t.right&&(i|=W),a<t.top?i|=X:a>t.bottom&&(i|=K),i}function I(n,a){var r,s,t=a.anchor,i=n;return a.clamp&&(i=function ve(n,a){for(var u,d,c,t=n.x0,i=n.y0,r=n.x1,s=n.y1,o=k(t,i,a),l=k(r,s,a);o|l&&!(o&l);)(u=o||l)&X?(d=t+(r-t)*(a.top-i)/(s-i),c=a.top):u&K?(d=t+(r-t)*(a.bottom-i)/(s-i),c=a.bottom):u&W?(c=i+(s-i)*(a.right-t)/(r-t),d=a.right):u&L&&(c=i+(s-i)*(a.left-t)/(r-t),d=a.left),u===o?o=k(t=d,i=c,a):l=k(r=d,s=c,a);return{x0:t,x1:r,y0:i,y1:s}}(i,a.area)),"start"===t?(r=i.x0,s=i.y0):"end"===t?(r=i.x1,s=i.y1):(r=(i.x0+i.x1)/2,s=(i.y0+i.y1)/2),function he(n,a,t,i,r){switch(r){case"center":t=i=0;break;case"bottom":t=0,i=1;break;case"right":t=1,i=0;break;case"left":t=-1,i=0;break;case"top":t=0,i=-1;break;case"start":t=-t,i=-i;break;case"end":break;default:r*=Math.PI/180,t=Math.cos(r),i=Math.sin(r)}return{x:n,y:a,vx:t,vy:i}}(r,s,n.vx,n.vy,a.align)}var N={arc:function(n,a){var t=(n.startAngle+n.endAngle)/2,i=Math.cos(t),r=Math.sin(t),s=n.innerRadius,o=n.outerRadius;return I({x0:n.x+i*s,y0:n.y+r*s,x1:n.x+i*o,y1:n.y+r*o,vx:i,vy:r},a)},point:function(n,a){var t=H(n,a.origin),i=t.x*n.options.radius,r=t.y*n.options.radius;return I({x0:n.x-i,y0:n.y-r,x1:n.x+i,y1:n.y+r,vx:t.x,vy:t.y},a)},bar:function(n,a){var t=H(n,a.origin),i=n.x,r=n.y,s=0,o=0;return n.horizontal?(i=Math.min(n.x,n.base),s=Math.abs(n.base-n.x)):(r=Math.min(n.y,n.base),o=Math.abs(n.base-n.y)),I({x0:i,y0:r+o,x1:i+s,y1:r,vx:t.x,vy:t.y},a)},fallback:function(n,a){var t=H(n,a.origin);return I({x0:n.x,y0:n.y,x1:n.x+(n.width||0),y1:n.y+(n.height||0),vx:t.x,vy:t.y},a)}},y=function(n){return Math.round(n*z)/z};function ge(n,a){var t=a.chart.getDatasetMeta(a.datasetIndex).vScale;if(!t)return null;if(void 0!==t.xCenter&&void 0!==t.yCenter)return{x:t.xCenter,y:t.yCenter};var i=t.getBasePixel();return n.horizontal?{x:i,y:null}:{x:null,y:i}}function be(n){return n instanceof O.qi?N.arc:n instanceof O.od?N.point:n instanceof O.ZL?N.bar:N.fallback}function xe(n,a,t){var i=n.shadowBlur,r=t.stroked,s=y(t.x),o=y(t.y),l=y(t.w);r&&n.strokeText(a,s,o,l),t.filled&&(i&&r&&(n.shadowBlur=0),n.fillText(a,s,o,l),i&&r&&(n.shadowBlur=i))}var ee=function(n,a,t,i){var r=this;r._config=n,r._index=i,r._model=null,r._rects=null,r._ctx=a,r._el=t};(0,f.a4)(ee.prototype,{_modelize:function(n,a,t,i){var r=this,s=r._index,o=(0,f.a0)((0,f.a)([t.font,{}],i,s)),l=(0,f.a)([t.color,f.d.color],i,s);return{align:(0,f.a)([t.align,"center"],i,s),anchor:(0,f.a)([t.anchor,"center"],i,s),area:i.chart.chartArea,backgroundColor:(0,f.a)([t.backgroundColor,null],i,s),borderColor:(0,f.a)([t.borderColor,null],i,s),borderRadius:(0,f.a)([t.borderRadius,0],i,s),borderWidth:(0,f.a)([t.borderWidth,0],i,s),clamp:(0,f.a)([t.clamp,!1],i,s),clip:(0,f.a)([t.clip,!1],i,s),color:l,display:n,font:o,lines:a,offset:(0,f.a)([t.offset,4],i,s),opacity:(0,f.a)([t.opacity,1],i,s),origin:ge(r._el,i),padding:(0,f.E)((0,f.a)([t.padding,4],i,s)),positioner:be(r._el),rotation:(0,f.a)([t.rotation,0],i,s)*(Math.PI/180),size:U_textSize(r._ctx,a,o),textAlign:(0,f.a)([t.textAlign,"start"],i,s),textShadowBlur:(0,f.a)([t.textShadowBlur,0],i,s),textShadowColor:(0,f.a)([t.textShadowColor,l],i,s),textStrokeColor:(0,f.a)([t.textStrokeColor,l],i,s),textStrokeWidth:(0,f.a)([t.textStrokeWidth,0],i,s)}},update:function(n){var o,l,u,a=this,t=null,i=null,r=a._index,s=a._config,d=(0,f.a)([s.display,!0],n,r);d&&(l=(0,f.v)((0,f.Q)(s.formatter,[o=n.dataset.data[r],n]),o),(u=(0,f.k)(l)?[]:function(n){var t,a=[];for(n=[].concat(n);n.length;)"string"==typeof(t=n.pop())?a.unshift.apply(a,t.split("\n")):Array.isArray(t)?n.push.apply(n,t):(0,f.k)(n)||a.unshift(""+t);return a}(l)).length&&(i=function _e(n){var a=n.borderWidth||0,t=n.padding,i=n.size.height,r=n.size.width,s=-r/2,o=-i/2;return{frame:{x:s-t.left-a,y:o-t.top-a,w:r+t.width+2*a,h:i+t.height+2*a},text:{x:s,y:o,w:r,h:i}}}(t=a._modelize(d,u,s,n)))),a._model=t,a._rects=i},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(n,a){var o,i=n.ctx,r=this._model,s=this._rects;this.visible()&&(i.save(),r.clip&&(o=r.area,i.beginPath(),i.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),i.clip()),i.globalAlpha=function(n,a,t){return Math.max(n,Math.min(a,t))}(0,r.opacity,1),i.translate(y(a.x),y(a.y)),i.rotate(r.rotation),function we(n,a,t){var i=t.backgroundColor,r=t.borderColor,s=t.borderWidth;!i&&(!r||!s)||(n.beginPath(),function Ce(n,a,t,i,r,s){var o=Math.PI/2;if(s){var l=Math.min(s,r/2,i/2),u=a+l,d=t+l,c=a+i-l,p=t+r-l;n.moveTo(a,d),u<c&&d<p?(n.arc(u,d,l,-Math.PI,-o),n.arc(c,d,l,-o,0),n.arc(c,p,l,0,o),n.arc(u,p,l,o,Math.PI)):u<c?(n.moveTo(u,t),n.arc(c,d,l,-o,o),n.arc(u,d,l,o,Math.PI+o)):d<p?(n.arc(u,d,l,-Math.PI,0),n.arc(u,p,l,0,Math.PI)):n.arc(u,d,l,-Math.PI,Math.PI),n.closePath(),n.moveTo(a,t)}else n.rect(a,t,i,r)}(n,y(a.x)+s/2,y(a.y)+s/2,y(a.w)-s,y(a.h)-s,t.borderRadius),n.closePath(),i&&(n.fillStyle=i,n.fill()),r&&s&&(n.strokeStyle=r,n.lineWidth=s,n.lineJoin="miter",n.stroke()))}(i,s.frame,r),function Te(n,a,t,i){var C,r=i.textAlign,s=i.color,o=!!s,l=i.font,u=a.length,d=i.textStrokeColor,c=i.textStrokeWidth,p=d&&c;if(u&&(o||p))for(t=function ye(n,a,t){var i=t.lineHeight,r=n.w,s=n.x;return"center"===a?s+=r/2:("end"===a||"right"===a)&&(s+=r),{h:i,w:r,x:s,y:n.y+i/2}}(t,r,l),n.font=l.string,n.textAlign=r,n.textBaseline="middle",n.shadowBlur=i.textShadowBlur,n.shadowColor=i.textShadowColor,o&&(n.fillStyle=s),p&&(n.lineJoin="round",n.lineWidth=c,n.strokeStyle=d),C=0,u=a.length;C<u;++C)xe(n,a[C],{stroked:p,filled:o,w:t.w,x:t.x,y:t.y+t.h*C})}(i,r.lines,s.text,r),i.restore())}});var Ze=Number.MIN_SAFE_INTEGER||-9007199254740991,De=Number.MAX_SAFE_INTEGER||9007199254740991;function S(n,a,t){var i=Math.cos(t),r=Math.sin(t),s=a.x,o=a.y;return{x:s+i*(n.x-s)-r*(n.y-o),y:o+r*(n.x-s)+i*(n.y-o)}}function te(n,a){var s,o,d,t=De,i=Ze,r=a.origin;for(s=0;s<n.length;++s)d=a.vx*((o=n[s]).x-r.x)+a.vy*(o.y-r.y),t=Math.min(t,d),i=Math.max(i,d);return{min:t,max:i}}function F(n,a){var t=a.x-n.x,i=a.y-n.y,r=Math.sqrt(t*t+i*i);return{vx:(a.x-n.x)/r,vy:(a.y-n.y)/r,origin:n,ln:r}}var ne=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function ie(n,a,t){var i=a.positioner(n,a),r=i.vx,s=i.vy;if(!r&&!s)return{x:i.x,y:i.y};var o=t.w,l=t.h,u=a.rotation,d=Math.abs(o/2*Math.cos(u))+Math.abs(l/2*Math.sin(u)),c=Math.abs(o/2*Math.sin(u))+Math.abs(l/2*Math.cos(u)),p=1/Math.max(Math.abs(r),Math.abs(s));return d*=r*p,c*=s*p,{x:i.x+(d+=a.offset*r),y:i.y+(c+=a.offset*s)}}(0,f.a4)(ne.prototype,{center:function(){var n=this._rect;return{x:n.x+n.w/2,y:n.y+n.h/2}},update:function(n,a,t){this._rotation=t,this._rect={x:a.x+n.x,y:a.y+n.y,w:a.w,h:a.h}},contains:function(n){var a=this,i=a._rect;return!((n=S(n,a.center(),-a._rotation)).x<i.x-1||n.y<i.y-1||n.x>i.x+i.w+2||n.y>i.y+i.h+2)},intersects:function(n){var r,s,o,a=this._points(),t=n._points(),i=[F(a[0],a[1]),F(a[0],a[3])];for(this._rotation!==n._rotation&&i.push(F(t[0],t[1]),F(t[0],t[3])),r=0;r<i.length;++r)if(s=te(a,i[r]),o=te(t,i[r]),s.max<o.min||o.max<s.min)return!1;return!0},_points:function(){var n=this,a=n._rect,t=n._rotation,i=n.center();return[S({x:a.x,y:a.y},i,t),S({x:a.x+a.w,y:a.y},i,t),S({x:a.x+a.w,y:a.y+a.h},i,t),S({x:a.x,y:a.y+a.h},i,t)]}});var A={prepare:function(n){var t,i,r,s,o,a=[];for(t=0,r=n.length;t<r;++t)for(i=0,s=n[t].length;i<s;++i)a.push(o=n[t][i]),o.$layout={_box:new ne,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return a.sort(function(l,u){var d=l.$layout,c=u.$layout;return d._idx===c._idx?c._set-d._set:c._idx-d._idx}),this.update(a),a},update:function(n){var t,i,r,s,o,a=!1;for(t=0,i=n.length;t<i;++t)s=(r=n[t]).model(),(o=r.$layout)._hidable=s&&"auto"===s.display,o._visible=r.visible(),a|=o._hidable;a&&function Ue(n){var a,t,i,r,s,o,l;for(a=0,t=n.length;a<t;++a)(r=(i=n[a]).$layout)._visible&&(l=new Proxy(i._el,{get:(u,d)=>u.getProps([d],!0)[d]}),s=i.geometry(),o=ie(l,i.model(),s),r._box.update(o,s,i.rotation()));(function Be(n,a){var t,i,r,s;for(t=n.length-1;t>=0;--t)for(r=n[t].$layout,i=t-1;i>=0&&r._visible;--i)(s=n[i].$layout)._visible&&r._box.intersects(s._box)&&a(r,s)})(n,function(u,d){var c=u._hidable,p=d._hidable;c&&p||p?d._visible=!1:c&&(u._visible=!1)})}(n)},lookup:function(n,a){var t,i;for(t=n.length-1;t>=0;--t)if((i=n[t].$layout)&&i._visible&&i._box.contains(a))return n[t];return null},draw:function(n,a){var t,i,r,s,o,l;for(t=0,i=a.length;t<i;++t)(s=(r=a[t]).$layout)._visible&&(o=r.geometry(),l=ie(r._el,r.model(),o),s._box.update(l,o,r.rotation()),r.draw(n,l))}},g="$datalabels",ae="$default";function Q(n,a,t,i){if(a){var o,r=t.$context,s=t.$groups;a[s._set]&&(o=a[s._set][s._key])&&!0===(0,f.Q)(o,[r,i])&&(n[g]._dirty=!0,t.update(r))}}var Fe={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(n){if((0,f.k)(n))return null;var t,i,r,a=n;if((0,f.i)(n))if((0,f.k)(n.label))if((0,f.k)(n.r))for(a="",r=0,i=(t=Object.keys(n)).length;r<i;++r)a+=(0!==r?", ":"")+t[r]+": "+n[t[r]];else a=n.r;else a=n.label;return""+a},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(n){n[g]={_actives:[]}},beforeUpdate:function(n){var a=n[g];a._listened=!1,a._listeners={},a._datasets=[],a._labels=[]},afterDatasetUpdate:function(n,a,t){var p,C,le,de,$,ue,Z,x,i=a.index,r=n[g],s=r._datasets[i]=[],o=n.isDatasetVisible(i),l=n.data.datasets[i],u=function Me(n,a){var s,o,t=n.datalabels,i={},r=[];return!1===t?null:(!0===t&&(t={}),a=(0,f.a4)({},[a,t]),s=a.labels||{},o=Object.keys(s),delete a.labels,o.length?o.forEach(function(l){s[l]&&r.push((0,f.a4)({},[a,s[l],{_key:l}]))}):r.push(a),i=r.reduce(function(l,u){return(0,f.F)(u.listeners||{},function(d,c){l[c]=l[c]||{},l[c][u._key||ae]=d}),delete u.listeners,l},{}),{labels:r,listeners:i})}(l,t),d=a.meta.data||[],c=n.ctx;for(c.save(),p=0,le=d.length;p<le;++p)if((Z=d[p])[g]=[],o&&Z&&n.getDataVisibility(p)&&!Z.skip)for(C=0,de=u.labels.length;C<de;++C)ue=($=u.labels[C])._key,(x=new ee($,c,Z,p)).$groups={_set:i,_key:ue||ae},x.$context={active:!1,chart:n,dataIndex:p,dataset:l,datasetIndex:i},x.update(x.$context),Z[g].push(x),s.push(x);c.restore(),(0,f.a4)(r._listeners,u.listeners,{merger:function(J,j,Zt){j[J]=j[J]||{},j[J][a.index]=Zt[J],r._listened=!0}})},afterUpdate:function(n){n[g]._labels=A.prepare(n[g]._datasets)},afterDatasetsDraw:function(n){A.draw(n,n[g]._labels)},beforeEvent:function(n,a){if(n[g]._listened){var t=a.event;switch(t.type){case"mousemove":case"mouseout":!function Ie(n,a){var r,s,t=n[g],i=t._listeners;if(i.enter||i.leave){if("mousemove"===a.type)s=A.lookup(t._labels,a);else if("mouseout"!==a.type)return;r=t._hovered,t._hovered=s,function ke(n,a,t,i,r){var s,o;!t&&!i||(t?i?t!==i&&(o=s=!0):o=!0:s=!0,o&&Q(n,a.leave,t,r),s&&Q(n,a.enter,i,r))}(n,i,r,s,a)}}(n,t);break;case"click":!function Ne(n,a){var t=n[g],i=t._listeners.click,r=i&&A.lookup(t._labels,a);r&&Q(n,i,r,a)}(n,t)}}},afterEvent:function(n){var s,o,l,u,d,c,p,a=n[g],r=function(n,a){var r,s,o,l,t=n.slice(),i=[];for(r=0,o=a.length;r<o;++r)-1===(s=t.indexOf(l=a[r]))?i.push([l,1]):t.splice(s,1);for(r=0,o=t.length;r<o;++r)i.push([t[r],-1]);return i}(a._actives,a._actives=n.getActiveElements());for(s=0,o=r.length;s<o;++s)if((d=r[s])[1])for(l=0,u=(p=d[0].element[g]||[]).length;l<u;++l)(c=p[l]).$context.active=1===d[1],c.update(c.$context);(a._dirty||r.length)&&(A.update(a._labels),n.render()),delete a._dirty}};let Je=(()=>{class n{constructor(){this.barChartOptions={responsive:!0,scales:{x:{},y:{max:16,ticks:{stepSize:0}}},plugins:{legend:{display:!0},datalabels:{anchor:"end",align:"end"}}},this.barChartType="bar",this.barChartPlugins=[Fe],this.barChartData={labels:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],datasets:[{data:[0,0,0,0,0,0,0,0,0,0,0,0],label:"Horas",backgroundColor:"rgba(200, 16, 46, 0.5)"}]}}ngOnChanges(t){this.barChartData.datasets[0].data=this.input,this.chart?.update()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["bar-chart-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(D.jh,5),2&t){let r;e.iGM(r=e.CRH())&&(i.chart=r.first)}},inputs:{input:"input"},features:[e.TTD],decls:1,vars:4,consts:[["baseChart","",1,"chart",3,"data","options","plugins","type"]],template:function(t,i){1&t&&e._UZ(0,"canvas",0),2&t&&e.Q6J("data",i.barChartData)("options",i.barChartOptions)("plugins",i.barChartPlugins)("type",i.barChartType)},dependencies:[D.jh],encapsulation:2}),n})();var Ee=h(3499),qe=h(2641),Oe=h(7579);const He=["modalContent"];function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-month-view",11),e.NdJ("dayClicked",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.dayClicked(r.day))})("eventTimesChanged",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(r))})("eventClicked",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",r.event))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)("activeDayIsOpen",t.activeDayIsOpen)}}function Ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-week-view",12),e.NdJ("eventTimesChanged",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(r))})("eventClicked",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",r.event))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function $e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mwl-calendar-day-view",12),e.NdJ("eventTimesChanged",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.eventTimesChanged(r))})("eventClicked",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.handleEvent("Clicked",r.event))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("viewDate",t.viewDate)("events",t.events)("refresh",t.refresh)}}function je(n,a){if(1&n&&(e.TgZ(0,"a",24),e._uU(1,"Editar"),e.qZA()),2&n){const t=e.oxw(2);e.MGl("href","./benefit-employee/edit/",t.modalData.event.meta.id,"",e.LSH)}}function Ve(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.deleteBenefit(r.modalData.event.meta.id))}),e._uU(1,"Eliminar"),e.qZA()}}function Pe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"h5",14),e._uU(2,"Detalle del Beneficio"),e.qZA(),e.TgZ(3,"button",15),e.NdJ("click",function(){const s=e.CHM(t).close;return e.KtG(s())}),e.TgZ(4,"span",16),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",17)(7,"h2"),e._uU(8),e.qZA()(),e.TgZ(9,"div",18)(10,"div",19)(11,"div",20)(12,"small"),e._uU(13,"Beneficio"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.qZA()(),e.TgZ(16,"div",20)(17,"small"),e._uU(18,"Detalle"),e.qZA(),e.TgZ(19,"p"),e._uU(20),e.qZA()()(),e.TgZ(21,"div",19)(22,"div",20)(23,"small"),e._uU(24,"Fecha de redenci\xf3n"),e.qZA(),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"date"),e.qZA()()()(),e.TgZ(28,"div",21),e.YNc(29,je,2,1,"a",22),e.YNc(30,Ve,2,0,"a",23),e.qZA()}if(2&n){const t=e.oxw();e.xp6(8),e.hij("Colaborador: ",t.modalData.event.title,""),e.xp6(7),e.Oqu(t.modalData.event.meta.benefits.name),e.xp6(5),e.Oqu(t.modalData.event.meta.benefit_detail.name),e.xp6(6),e.Oqu(e.xi3(27,6,t.modalData.event.meta.benefit_begin_time,"medium")),e.xp6(3),e.Q6J("ngIf",t.isAdmin),e.xp6(1),e.Q6J("ngIf",t.isAdmin)}}const re={primary:{primary:"#37a91b",secondary:"#55ffbb"},secondary:{primary:"#888888",secondary:"#bbbbbb"}};let Re=(()=>{class n{constructor(t,i,r){this.modal=t,this.benefitUserService=i,this.authService=r,this.view=b.wr.Month,this.CalendarView=b.wr,this.viewDate=new Date,this.isAdmin=!1,this.refresh=new Oe.x,this.events=[],this.activeDayIsOpen=!1}ngOnInit(){this.authService.validarAdmin().subscribe({next:t=>{this.isAdmin=t.admin},error:t=>{_().fire({title:"Error",icon:"error",html:t.error.msg,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",_().stopTimer),i.addEventListener("mouseleave",_().resumeTimer)}})}})}ngOnChanges(t){this.addEventsToCalendar(this.data)}dayClicked({date:t,events:i}){(0,Ee.Z)(t,this.viewDate)?(this.activeDayIsOpen=!((0,qe.Z)(this.viewDate,t)&&!0===this.activeDayIsOpen||0===i.length),this.viewDate=t):(this.viewDate=t,this.activeDayIsOpen=!1)}eventTimesChanged({event:t,newStart:i,newEnd:r}){this.events=this.events.map(s=>s===t?{...t,start:i,end:r}:s)}handleEvent(t,i){this.modalData={event:i,action:t},this.modal.open(this.modalContent,{size:"lg"})}setView(t){this.view=t}closeOpenMonthViewDay(){this.activeDayIsOpen=!1}addEventsToCalendar(t){this.events=[],t?.flat().forEach(i=>{let{benefit_user:r}=i;r.forEach(s=>{("Mi Viernes"===s.benefits.name||"Mi Banco de Horas"===s.benefits.name||"Mi Cumplea\xf1os"===s.benefits.name)&&(this.events=[...this.events,{title:i.name+" - "+s.benefits.name+" - "+s.benefit_detail.name,start:new Date(s.benefit_begin_time),end:new Date(s.benefit_end_time),color:i.id===Number.parseInt(localStorage.getItem("uid"))?re.primary:re.secondary,draggable:!1,meta:s}])})})}deleteBenefit(t){_().fire({title:"Eliminar beneficio?",text:"Confirme que desea eliminar el beneficio.",icon:"question",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOutUp"},showConfirmButton:!0,showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"}).then(i=>{i.isConfirmed&&this.benefitUserService.destroy(this.modalData.event.meta.id).subscribe({next:()=>{this.events=this.events.filter(r=>r.meta.id!==t),this.refresh.next(),this.modal.dismissAll(),this.activeDayIsOpen=!1},error:r=>console.log(r)})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(w.FF),e.Y36(E),e.Y36(q.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["calendar-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(He,7),2&t){let r;e.iGM(r=e.CRH())&&(i.modalContent=r.first)}},inputs:{data:"data"},features:[e.TTD],decls:28,vars:20,consts:[[1,"row","text-center"],[1,"col-md-4"],[1,"btn-group"],["mwlCalendarPreviousView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],["mwlCalendarToday","",1,"btn","btn-outline-secondary",3,"viewDate","viewDateChange"],["mwlCalendarNextView","",1,"btn","btn-primary",3,"view","viewDate","viewDateChange"],[1,"btn","btn-primary",3,"click"],[3,"ngSwitch"],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventTimesChanged","eventClicked",4,"ngSwitchCase"],[3,"viewDate","events","refresh","eventTimesChanged","eventClicked",4,"ngSwitchCase"],["modalContent",""],[3,"viewDate","events","refresh","activeDayIsOpen","dayClicked","eventTimesChanged","eventClicked"],[3,"viewDate","events","refresh","eventTimesChanged","eventClicked"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row"],[1,"col-6"],[1,"modal-footer"],["class","btn btn-warning",3,"href",4,"ngIf"],["class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-warning",3,"href"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.NdJ("viewDateChange",function(s){return i.viewDate=s})("viewDateChange",function(){return i.closeOpenMonthViewDay()}),e._uU(4," Anterior "),e.qZA(),e.TgZ(5,"div",4),e.NdJ("viewDateChange",function(s){return i.viewDate=s}),e._uU(6," Hoy "),e.qZA(),e.TgZ(7,"div",5),e.NdJ("viewDateChange",function(s){return i.viewDate=s})("viewDateChange",function(){return i.closeOpenMonthViewDay()}),e._uU(8," Siguiente "),e.qZA()()(),e.TgZ(9,"div",1)(10,"h3"),e._uU(11),e.ALo(12,"calendarDate"),e.qZA()(),e.TgZ(13,"div",1)(14,"div",2)(15,"div",6),e.NdJ("click",function(){return i.setView(i.CalendarView.Month)}),e._uU(16," Mes "),e.qZA(),e.TgZ(17,"div",6),e.NdJ("click",function(){return i.setView(i.CalendarView.Week)}),e._uU(18," Semana "),e.qZA(),e.TgZ(19,"div",6),e.NdJ("click",function(){return i.setView(i.CalendarView.Day)}),e._uU(20," D\xeda "),e.qZA()()()(),e._UZ(21,"br"),e.TgZ(22,"div",7),e.YNc(23,Qe,1,4,"mwl-calendar-month-view",8),e.YNc(24,Ye,1,3,"mwl-calendar-week-view",9),e.YNc(25,$e,1,3,"mwl-calendar-day-view",9),e.qZA(),e.YNc(26,Pe,31,9,"ng-template",null,10,e.W1O)),2&t&&(e.xp6(3),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(2),e.Q6J("viewDate",i.viewDate),e.xp6(2),e.Q6J("view",i.view)("viewDate",i.viewDate),e.xp6(4),e.Oqu(e.Dn7(12,16,i.viewDate,i.view+"ViewTitle","en")),e.xp6(4),e.ekj("active",i.view===i.CalendarView.Month),e.xp6(2),e.ekj("active",i.view===i.CalendarView.Week),e.xp6(2),e.ekj("active",i.view===i.CalendarView.Day),e.xp6(3),e.Q6J("ngSwitch",i.view),e.xp6(1),e.Q6J("ngSwitchCase",i.CalendarView.Month),e.xp6(1),e.Q6J("ngSwitchCase",i.CalendarView.Week),e.xp6(1),e.Q6J("ngSwitchCase",i.CalendarView.Day))},dependencies:[b.YX,b.MG,b.nA,b.GH,b.TK,b.Se,v.O5,v.RF,v.n9,b.vk,v.uU],encapsulation:2,changeDetection:0}),n})(),Ge=(()=>{class n{constructor(){this.doughnutChartLabels=["Usadas","Disponibles"],this.doughnutChartData={labels:this.doughnutChartLabels,datasets:[{data:[this.totalBancoHoras,16-this.totalBancoHoras],backgroundColor:["#C8102E","gray"],hoverBackgroundColor:["#D8102E","darkgray"]}]},this.doughnutChartType="doughnut"}ngOnChanges(t){this.doughnutChartData.datasets[0].data=[this.totalBancoHoras,16-this.totalBancoHoras],this.chart?.chart?.update()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["doughnut-chart-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(D.jh,5),2&t){let r;e.iGM(r=e.CRH())&&(i.chart=r.first)}},inputs:{totalBancoHoras:"totalBancoHoras"},features:[e.TTD],decls:1,vars:2,consts:[["baseChart","",1,"chart",3,"data","type"]],template:function(t,i){1&t&&e._UZ(0,"canvas",0),2&t&&e.Q6J("data",i.doughnutChartData)("type",i.doughnutChartType)},dependencies:[D.jh],encapsulation:2}),n})();function ze(n,a){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t),e.xp6(1),e.hij("",t," ")}}function Le(n,a){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.MGl("value"," ",null==t?null:t.id,""),e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function We(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Le,2,2,"option",8),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.users)}}function Ke(n,a){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.MGl("value"," ",t.id,""),e.xp6(1),e.hij(" ",t.name," ")}}function Xe(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"option",17),e._uU(2),e.qZA(),e.YNc(3,Ke,2,2,"option",8),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.MGl("value"," ",null==t.user?null:t.user.id,""),e.xp6(1),e.hij(" ",null==t.user?null:t.user.name," "),e.xp6(1),e.Q6J("ngForOf",null==t.user?null:t.user.subordinates)}}function et(n,a){1&n&&e._UZ(0,"div")}function tt(n,a){1&n&&e._UZ(0,"img",31)}function nt(n,a){1&n&&e._UZ(0,"img",32)}function it(n,a){1&n&&e._UZ(0,"img",33)}function at(n,a){1&n&&e._UZ(0,"img",34)}function rt(n,a){1&n&&e._UZ(0,"img",35)}function st(n,a){if(1&n&&(e.TgZ(0,"div",36)(1,"div",37),e._UZ(2,"doughnut-chart-component",38),e.qZA(),e.TgZ(3,"div",39),e._UZ(4,"bar-chart-component",40),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("totalBancoHoras",t.totalBancoHoras),e.xp6(2),e.Q6J("input",t.bancosHoras)}}function ot(n,a){if(1&n&&(e.TgZ(0,"div")(1,"div",20)(2,"div",21),e.YNc(3,tt,1,0,"img",22),e.YNc(4,nt,1,0,"img",23),e.YNc(5,it,1,0,"img",24),e.YNc(6,at,1,0,"img",25),e.YNc(7,rt,1,0,"img",26),e.qZA(),e.TgZ(8,"div",27)(9,"div",28),e._uU(10),e.qZA(),e._UZ(11,"ul",29),e.qZA()(),e.YNc(12,st,5,2,"div",30),e.qZA()),2&n){const t=a.$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","Mi Cumplea\xf1os"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Banco de Horas"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Horario Flexible"),e.xp6(1),e.Q6J("ngSwitchCase","Mi Viernes"),e.xp6(1),e.Q6J("ngSwitchCase","Tiempo para el Viajero"),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("innerHTML",i.selectBenefit(t.id),e.oJD),e.xp6(1),e.Q6J("ngIf","Mi Banco de Horas"===t.name)}}function lt(n,a){if(1&n&&(e._UZ(0,"hr"),e.TgZ(1,"div",18)(2,"h2"),e._uU(3),e.qZA(),e.YNc(4,ot,13,9,"div",19),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij("Detalle de beneficios de ",null==t.currentUserBenefits?null:t.currentUserBenefits.name,""),e.xp6(1),e.Q6J("ngForOf",t.benefits)}}let dt=(()=>{class n{constructor(t,i,r,s,o,l){this.fb=t,this.benefitUserService=i,this.benefitService=r,this.userService=s,this.router=o,this.authService=l,this.onClickString="",this.years=[],this.totalBancoHoras=0,this.bancosHoras=[0,0,0,0,0,0,0,0,0,0,0,0],this.isAdmin=!1,this.viewBenefitUser=this.fb.group({years:[(new Date).getFullYear().toString(),m.kI.required],users:["",m.kI.required]});const u=(new Date).getFullYear();for(let d=u;d>u-5;d--)this.years.push(d)}ngOnInit(){this.authService.validarAdmin().subscribe({next:t=>{this.isAdmin=t.admin,this.isAdmin?this.userService.index().subscribe({next:i=>{this.users=i},error:i=>{this.router.navigateByUrl("benefit-employee"),_().fire({title:"Error",icon:"error",html:i.error.msg,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",_().stopTimer),r.addEventListener("mouseleave",_().resumeTimer)}})}}):this.userService.show(Number.parseInt(localStorage.getItem("uid"))).subscribe({next:i=>{this.user=Object.values(i)[0]},error:i=>{this.router.navigateByUrl("benefit-employee"),_().fire({title:"Error",icon:"error",html:i.error.msg,timer:3e3,timerProgressBar:!0,didOpen:r=>{r.addEventListener("mouseenter",_().stopTimer),r.addEventListener("mouseleave",_().resumeTimer)}})}})}}),this.benefitService.index().subscribe(t=>this.benefits=t),this.benefitUserService.index(Number.parseInt(localStorage.getItem("uid")),this.viewBenefitUser.get("years")?.value).subscribe(t=>{this.allUsersBenefits=t,this.calendarData=this.allUsersBenefits})}getBenefitDetail(t){this.viewBenefitUser.get("years")?.value&&this.viewBenefitUser.get("users")?.value&&this.benefitUserService.index(Number.parseInt(localStorage.getItem("uid")),this.viewBenefitUser.get("years")?.value).subscribe(i=>{this.allUsersBenefits=i,this.currentUserBenefits=this.allUsersBenefits.find(s=>s.id===Number.parseInt(this.viewBenefitUser.controls.users.value)),this.calendarData=this.allUsersBenefits,this.bancosHoras=this.bancosHoras.map(s=>0),this.currentUserBenefits.benefit_user.filter(s=>"Mi Banco de Horas"===s.benefits.name).map(s=>{this.bancosHoras[new Date(s.benefit_begin_time).getMonth()]+=s.benefit_detail.time_hours||0})})}selectBenefit(t){let i=this.currentUserBenefits?.benefit_user.filter(r=>r.benefit_id===t);if(i?.length){let r="";switch(i[0].benefits.name){case"Mi Cumplea\xf1os":return i?`<li class="list-group-item">\n              Fecha de redenci\xf3n: ${new v.uU("en-US").transform(i[0].benefit_begin_time,"dd/MM/yyyy, hh:mm a")}\n            </li>`:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Banco de Horas":return this.totalBancoHoras=(new P).transform(i),i.forEach(s=>{r+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}: ${s.benefit_detail.time_hours} horas\n            </li>`}),i?r:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Horario Flexible":case"Tiempo para el Viajero":return i?`<li class="list-group-item">\n                ${i[0].benefit_detail.name}\n              </li>`:'<li class="list-group-item">No se encontraron beneficios registrados</li>';case"Mi Viernes":return i.forEach(s=>{r+=`<li class="list-group-item">\n              ${new v.uU("en-US").transform(s.benefit_begin_time,"dd/MM/yyyy, hh:mm a")}: ${s.benefit_detail.time_hours} horas\n            </li>`}),i?r:'<li class="list-group-item">No se encontraron beneficios registrados</li>'}}return this.totalBancoHoras=0,'<li class="list-group-item">No se encontraron beneficios registrados</li>'}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.qu),e.Y36(E),e.Y36(R.T),e.Y36(G.K),e.Y36(B.F0),e.Y36(q.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["benefitemployee-index"]],decls:25,vars:7,consts:[[1,"row","mt-5"],[1,"col"],[3,"formGroup"],[1,"row","p-3"],[1,"col-sm-4","my-1","my-sm-0"],[1,"input-group"],["for","years",1,"input-group-text"],["formControlName","years",1,"form-select",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-8","my-1","my-sm-0"],["for","user",1,"input-group-text"],["formControlName","users",1,"form-select",3,"change"],[4,"ngIf"],[4,"ngIf","ngIfThen"],[1,"row","p-3","bg-light","rounded","shadow"],[3,"data"],["newBenefitDetailTemplate",""],[3,"value"],[1,"row","shadow","rounded","mb-3","pb-3","bg-light"],[4,"ngFor","ngForOf"],[1,"input-group","mt-3"],[1,"input-group-text",2,"width","20%",3,"ngSwitch"],["src","./assets/images/cumplea\xf1os.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/banco_horas.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/horario_flexible.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/mi_viernes.svg","width","100%;",4,"ngSwitchCase"],["src","./assets/images/tiempo_viajero.svg","width","100%;",4,"ngSwitchCase"],[1,"form-control"],[1,"card-header"],[1,"list-group","list-group-flush",3,"innerHTML"],["class","row",4,"ngIf"],["src","./assets/images/cumplea\xf1os.svg","width","100%;"],["src","./assets/images/banco_horas.svg","width","100%;"],["src","./assets/images/horario_flexible.svg","width","100%;"],["src","./assets/images/mi_viernes.svg","width","100%;"],["src","./assets/images/tiempo_viajero.svg","width","100%;"],[1,"row"],[1,"col-4"],[3,"totalBancoHoras"],[1,"col-8"],[3,"input"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"A\xf1o"),e.qZA(),e.TgZ(8,"select",7),e.NdJ("change",function(s){return i.getBenefitDetail(s)}),e.YNc(9,ze,2,2,"option",8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",5)(12,"label",10),e._uU(13,"Colaborador"),e.qZA(),e.TgZ(14,"select",11),e.NdJ("change",function(s){return i.getBenefitDetail(s)}),e.YNc(15,We,2,1,"ng-container",12),e.YNc(16,Xe,4,3,"ng-container",12),e.qZA()()()()()()(),e.YNc(17,et,1,0,"div",13),e._UZ(18,"hr"),e.TgZ(19,"div",14)(20,"h2"),e._uU(21,"Calendario de beneficios MiViernes - Mis colaboradores"),e.qZA(),e._UZ(22,"calendar-component",15),e.qZA(),e.YNc(23,lt,5,2,"ng-template",null,16,e.W1O)),2&t){const r=e.MAs(24);e.xp6(2),e.Q6J("formGroup",i.viewBenefitUser),e.xp6(7),e.Q6J("ngForOf",i.years),e.xp6(6),e.Q6J("ngIf",i.isAdmin),e.xp6(1),e.Q6J("ngIf",!i.isAdmin),e.xp6(1),e.Q6J("ngIf",i.viewBenefitUser.valid)("ngIfThen",r),e.xp6(5),e.Q6J("data",i.calendarData)}},dependencies:[v.sg,v.O5,v.RF,v.n9,m._Y,m.YN,m.Kr,m.EJ,m.JJ,m.JL,m.sg,m.u,Je,Re,Ge],encapsulation:2}),n})(),ut=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["benefitemployee-show"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"show works!"),e.qZA())},encapsulation:2}),n})();var ct=h(9906),se=h(3900),ft=h(8505),mt=h(9358),ht=h(4128);function pt(n,a){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function vt(n,a){1&n&&(e.TgZ(0,"span",24),e._UZ(1,"i",25),e.qZA())}function _t(n,a){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.Oqu(t.name)}}function gt(n,a){1&n&&(e.TgZ(0,"span",24),e._UZ(1,"i",25),e.qZA())}function bt(n,a){if(1&n&&(e.TgZ(0,"option",23),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.s9C("value",t.id),e.xp6(1),e.hij(" ",t.name,"")}}function Ct(n,a){1&n&&(e.TgZ(0,"span",24),e._UZ(1,"i",25),e.qZA())}const M=function(n){return{invalid:n}},Y=n=>n<10?`0${n}`:`${n}`;let wt=(()=>{class n extends w.Cw{fromModel(t){if(!t)return null;const i=t.split(":");return{hour:parseInt(i[0],10),minute:parseInt(i[1],10),second:parseInt(i[2],10)}}toModel(t){return null!=t?`${Y(t.hour)}:${Y(t.minute)}:${Y(t.second)}`:null}}return n.\u0275fac=function(){let a;return function(i){return(a||(a=e.n5z(n)))(i||n)}}(),n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})(),oe=(()=>{class n{constructor(t,i,r,s,o,l,u,d){this.fb=t,this.authService=i,this.benefitService=r,this.benefitUserService=s,this.userService=o,this.router=l,this.changeDetectorRef=u,this.activatedRoute=d,this.disableSubmitBtn=!1,this.createForm=this.fb.group({benefit_id:[{value:"",disabled:!0},m.kI.required],benefit_detail_id:[{value:"",disabled:!0},m.kI.required],time:["",m.kI.required],model:["",m.kI.required],benefit_begin_time:[""],benefit_end_time:[""],user_id:[{value:"",disabled:!0}]}),this.meridian=!0,this.userAndBenefitSpinner=!0,this.benefitDetailSpinner=!0}ngOnInit(){(0,ht.D)({validarAdmin:this.authService.validarAdmin().pipe((0,se.w)(t=>t?this.userService.index():this.userService.show(Number.parseInt(localStorage.getItem("uid"))))),loadServices:this.benefitService.index().pipe((0,ft.b)(t=>{this.benefits=t,this.createForm.get("benefit_id")?.enable(),this.userAndBenefitSpinner=!1}))}).subscribe({next:({validarAdmin:t})=>{this.users=Object.values(t),this.createForm.get("user_id")?.enable(),this.router.url.includes("edit")&&this.activatedRoute.params.pipe((0,se.w)(({id:r})=>this.benefitUserService.show(r))).subscribe(r=>{this.currentUserBenefits=Object.values(r)[0],this.createForm.get("benefit_id")?.setValue(this.currentUserBenefits.benefit_user[0].benefits.id),this.dp?.navigateTo({year:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getFullYear(),month:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMonth()+1}),this.createForm.get("model")?.setValue({year:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getFullYear(),month:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMonth()+1,day:new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getDate()}),this.tp?.updateHour(new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getHours().toString()),this.tp?.updateMinute(new Date(this.currentUserBenefits.benefit_user[0].benefit_begin_time).getMinutes().toString()),this.createForm.get("user_id")?.setValue(this.currentUserBenefits.id),this.fillBenefitDetail(this.currentUserBenefits.benefit_user[0].benefits.id)})},error:t=>{this.router.navigateByUrl("benefit-employee"),_().fire({title:"Error",icon:"error",html:t.error.message,timer:3e3,timerProgressBar:!0,didOpen:i=>{i.addEventListener("mouseenter",_().stopTimer),i.addEventListener("mouseleave",_().resumeTimer)}})}}),this.createForm.get("benefit_detail_id").valueChanges.subscribe(t=>{this.selectedBenefitDetail=this.benefit_details?.find(i=>i.id===Number.parseInt(t||0))})}ngAfterViewChecked(){this.changeDetectorRef.detectChanges()}campoEsValido(t){return this.createForm.controls[t].errors&&this.createForm.controls[t].touched}save(){if(this.createForm.invalid)return void this.createForm.markAllAsTouched();let t=`${this.createForm.get("model")?.value.year}-${this.createForm.get("model")?.value.month}-${this.createForm.get("model")?.value.day} ${this.createForm.get("time")?.value}`;this.createForm.get("benefit_begin_time")?.setValue((0,v.p6)(new Date(t),"yyyy-MM-dd HH:mm:ss","en-US")),this.createForm.get("benefit_end_time")?.setValue((0,v.p6)((0,mt.Z)(new Date(t),this.selectedBenefitDetail.time_hours).toString(),"yyyy-MM-dd HH:mm:ss","en-US")),this.currentUserBenefits?.id?this.benefitUserService.update(this.currentUserBenefits.benefit_user[0].id,this.createForm.value).subscribe(i=>{_().fire({title:"Actualizado",icon:"success",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}):this.benefitUserService.create(this.createForm.value).subscribe({next:i=>{_().fire({title:"Creado",text:"Beneficio registrado",icon:"success",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOutUp"}})}})}fillBenefitDetail(t){this.createForm.get("benefit_detail_id").reset(""),this.benefitDetailSpinner=!1,this.benefitService.show(t.target?.value||t).subscribe(i=>{this.benefit_details=Object.values(i)[0].benefit_detail,this.createForm.get("benefit_id").valid&&(this.benefitDetailSpinner=!0,this.createForm.get("benefit_detail_id").enable()),this.router.url.includes("edit")&&this.createForm.get("benefit_detail_id")?.setValue(this.currentUserBenefits.benefit_user[0].benefit_detail.id)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.qu),e.Y36(q.e),e.Y36(R.T),e.Y36(E),e.Y36(G.K),e.Y36(B.F0),e.Y36(e.sBO),e.Y36(B.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["benefitemployee-create"]],viewQuery:function(t,i){if(1&t&&(e.Gf(w.VL,5),e.Gf(w.Pm,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.dp=r.first),e.iGM(r=e.CRH())&&(i.tp=r.first)}},decls:42,vars:28,consts:[[1,"row","mt-5","p-5"],[1,"col"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-xl-9","px-2","d-flex","flex-column","justify-content-evenly"],["for","benefit"],[1,"input-group"],["formControlName","user_id","id","user_id","required","",1,"form-select",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","input-group-text","id","basic-addon1",4,"ngIf"],["formControlName","benefit_id","id","benefit_id","required","",1,"form-select",3,"ngClass","change"],["for","benefit_detail"],["formControlName","benefit_detail_id","id","benefit_detail_id","required","",1,"form-select",3,"ngClass"],[1,"col-xl-3","px-2","d-flex","flex-column"],["formControlName","model","required","",1,"m-2",3,"ngClass","navigate"],["dp",""],["formControlName","time","required","",1,"m-2","d-flex","justify-content-around",3,"ngClass","meridian"],["tp",""],["type","hidden","formControlName","benefit_begin_time",3,"value"],["type","hidden","formControlName","benefit_end_time"],[1,"mb-3"],["type","submit",1,"btn","btn-success","float-end",3,"disabled"],[3,"value"],["id","basic-addon1",1,"input-group-text"],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"div",1)(5,"form",2),e.NdJ("ngSubmit",function(){return i.save()}),e.TgZ(6,"div",3)(7,"div",4)(8,"label",5),e._uU(9,"Selecciona un colaborador"),e.qZA(),e.TgZ(10,"div",6)(11,"select",7)(12,"option",8),e._uU(13,"-- Seleccione Colaborador --"),e.qZA(),e.YNc(14,pt,2,2,"option",9),e.qZA(),e.YNc(15,vt,2,0,"span",10),e.qZA(),e.TgZ(16,"label",5),e._uU(17,"Selecciona un beneficio"),e.qZA(),e.TgZ(18,"div",6)(19,"select",11),e.NdJ("change",function(s){return i.fillBenefitDetail(s)}),e.TgZ(20,"option",8),e._uU(21,"-- Seleccione Beneficio --"),e.qZA(),e.YNc(22,_t,2,2,"option",9),e.qZA(),e.YNc(23,gt,2,0,"span",10),e.qZA(),e.TgZ(24,"label",12),e._uU(25,"Selecciona un Detalle"),e.qZA(),e.TgZ(26,"div",6)(27,"select",13)(28,"option",8),e._uU(29,"-- Seleccione Detalle --"),e.qZA(),e.YNc(30,bt,2,2,"option",9),e.qZA(),e.YNc(31,Ct,2,0,"span",10),e.qZA()(),e.TgZ(32,"div",14)(33,"ngb-datepicker",15,16),e.NdJ("navigate",function(s){return i.date=s.next}),e.qZA(),e._UZ(35,"ngb-timepicker",17,18),e.qZA()(),e._UZ(37,"input",19)(38,"input",20),e.TgZ(39,"div",21)(40,"button",22),e._uU(41),e.qZA()()()()()),2&t&&(e.xp6(2),e.AsE("",null!=i.currentUserBenefits&&i.currentUserBenefits.id?"Actualizar":"Nuevo"," beneficio para ",null==i.currentUserBenefits?null:i.currentUserBenefits.name,""),e.xp6(3),e.Q6J("formGroup",i.createForm),e.xp6(6),e.Q6J("ngClass",e.VKq(18,M,i.campoEsValido("user_id"))),e.xp6(3),e.Q6J("ngForOf",i.users),e.xp6(1),e.Q6J("ngIf",i.userAndBenefitSpinner),e.xp6(4),e.Q6J("ngClass",e.VKq(20,M,i.campoEsValido("benefit_id"))),e.xp6(3),e.Q6J("ngForOf",i.benefits),e.xp6(1),e.Q6J("ngIf",i.userAndBenefitSpinner),e.xp6(4),e.Q6J("ngClass",e.VKq(22,M,i.campoEsValido("benefit_detail_id"))),e.xp6(3),e.Q6J("ngForOf",i.benefit_details),e.xp6(1),e.Q6J("ngIf",!i.benefitDetailSpinner),e.xp6(2),e.Q6J("ngClass",e.VKq(24,M,i.campoEsValido("model"))),e.xp6(2),e.Q6J("ngClass",e.VKq(26,M,i.campoEsValido("time")))("meridian",i.meridian),e.xp6(2),e.s9C("value",i.benefit_begin_time),e.xp6(3),e.Q6J("disabled",i.disableSubmitBtn),e.xp6(1),e.hij(" ",null!=i.currentUserBenefits&&i.currentUserBenefits.id?"Actualizar":"Crear"," "))},dependencies:[v.mk,v.sg,v.O5,w.VL,w.Pm,m._Y,m.YN,m.Kr,m.Fj,m.EJ,m.JJ,m.JL,m.Q7,m.sg,m.u],encapsulation:2}),n})();const yt=[{path:"",component:ct.t,children:[{path:"index",component:dt},{path:"edit/:id",component:oe},{path:"show/:id",component:ut},{path:"create",component:oe},{path:"**",redirectTo:"index"}]}];let xt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[B.Bz.forChild(yt),B.Bz]}),n})(),Tt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[P,{provide:w.Cw,useClass:wt}],imports:[xt,b._8.forRoot({provide:b._A,useFactory:ce.x}),v.ez,w.M,w.UL,D.vQ,m.UX,m.u5]}),n})()}}]);