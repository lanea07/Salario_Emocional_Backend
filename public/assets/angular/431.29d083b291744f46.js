"use strict";(self.webpackChunksalarioemocionalfrontend=self.webpackChunksalarioemocionalfrontend||[]).push([[431],{431:(B,h,n)=>{n.r(h),n.d(h,{RoleModule:()=>U});var d=n(6814),a=n(6223),p=n(627),l=n(180),v=n(1107),f=n(4664),s=n(591),t=n(6689),m=n(8047),b=n(1230);function R(r,Y){if(1&r&&(t.TgZ(0,"small",11),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.Oqu(e.roleNameErrors)}}const C=function(r){return{invalid:r}};let g=(()=>{class r{get roleNameErrors(){const e=this.createForm.get("name")?.errors;return e.minlength?"El nombre no cumple con el largo m\xednimo de 5 caracteres":e.required?"El campo es obligatorio":""}constructor(e,o,i,c,u){this.activatedRoute=e,this.as=o,this.fb=i,this.roleService=c,this.router=u,this.createForm=this.fb.group({name:["",[a.kI.required,a.kI.minLength(5)]]}),this.disableSubmitBtn=!1}ngOnInit(){this.router.url.includes("edit")&&this.activatedRoute.params.pipe((0,f.w)(({id:e})=>this.roleService.show(e))).subscribe({next:e=>{const o=e;this.role=o,this.createForm.get("name")?.setValue(o.name)},error:e=>{this.router.navigateByUrl("benefit-employee"),this.as.subscriptionAlert(s.fI.ERROR,s.gW.ERROR,e.message)}})}campoEsValido(e){return this.createForm.controls[e].errors&&this.createForm.controls[e].touched}save(){this.createForm.invalid?this.createForm.markAllAsTouched():(this.role?.id?this.roleService.update(this.role?.id,this.createForm.value).subscribe({next:()=>{this.router.navigateByUrl(`/role/show/${this.role?.id}`),this.as.subscriptionAlert(s.fI.ACTUALIZADO,s.gW.SUCCESS)},error:({error:e})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(s.fI.ERROR,s.gW.ERROR,e.message)}}):this.roleService.create(this.createForm.value).subscribe({next:({id:e})=>{this.router.navigateByUrl(`/role/show/${e}`),this.as.subscriptionAlert(s.fI.CREADO,s.gW.SUCCESS)},error:({error:e})=>{this.disableSubmitBtn=!1,this.as.subscriptionAlert(s.fI.ERROR,s.gW.ERROR,e.message)}}),this.disableSubmitBtn=!0)}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(l.gz),t.Y36(s.c9),t.Y36(a.qu),t.Y36(m.N),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["role-create"]],decls:14,vars:7,consts:[[1,"row"],[1,"col"],[1,"p-5",3,"formGroup","ngSubmit"],[1,"mb-3"],["header","Informaci\xf3n B\xe1sica"],[1,"mb-3","form-floating"],["type","text","formControlName","name","id","name","placeholder","Nombre Completo",1,"form-control",3,"ngClass"],["for","name",1,"form-label"],[1,"fa-solid","fa-toolbox","me-1"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","btn-success","float-end",3,"disabled"],[1,"text-danger"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.save()}),t.TgZ(3,"div",3)(4,"p-panel",4)(5,"div",5),t._UZ(6,"input",6),t.TgZ(7,"label",7),t._UZ(8,"i",8),t._uU(9,"Nombre del Rol"),t.qZA(),t.YNc(10,R,2,1,"small",9),t.qZA()()(),t.TgZ(11,"div",3)(12,"button",10),t._uU(13),t.qZA()()()()()),2&o&&(t.xp6(2),t.Q6J("formGroup",i.createForm),t.xp6(4),t.Q6J("ngClass",t.VKq(5,C,i.campoEsValido("name"))),t.xp6(4),t.Q6J("ngIf",i.campoEsValido("name")),t.xp6(2),t.Q6J("disabled",i.disableSubmitBtn),t.xp6(1),t.hij(" ",null!=i.role&&i.role.id?"Actualizar":"Crear"," "))},dependencies:[d.mk,d.O5,b.s,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],encapsulation:2})}return r})();var A=n(2369);let x=(()=>{class r{constructor(e,o,i,c){this.as=e,this.renderer=o,this.roleService=i,this.router=c,this.columns=[{title:"Nombre",data:"name"},{title:"Opciones",data:function(u,w,J){return`\n          <span style="cursor: pointer;" role_id="${u.id}" class="badge rounded-pill text-bg-warning">\n            Detalles\n            <i class="fa-solid fa-circle-info fa-fade" style="color: #000000;"></i>\n          </span>`}}]}ngOnInit(){this.dtOptions={ajax:(e,o)=>{this.roleService.index().subscribe({next:i=>{o({data:i})},error:i=>{this.router.navigateByUrl("benefit-employee"),this.as.subscriptionAlert(s.fI.ERROR,s.gW.ERROR,i.error.message)}})},columns:this.columns,responsive:!0,language:A}}ngAfterViewInit(){this.renderer.listen("document","click",e=>{e.target.hasAttribute("role_id")&&this.router.navigate(["/role/show/"+e.target.getAttribute("role_id")])})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(s.c9),t.Y36(t.Qsj),t.Y36(m.N),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["role-index"]],decls:5,vars:1,consts:[[1,"row","mt-5"],[1,"col"],["datatable","",1,"table","table-hover","table-sm","table-striped",3,"dtOptions"],[1,"bg-dark","text-light"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"table",2),t._UZ(3,"thead",3)(4,"tbody"),t.qZA()()()),2&o&&(t.xp6(2),t.Q6J("dtOptions",i.dtOptions))},dependencies:[p.G],encapsulation:2})}return r})();var S=n(3416);function Z(r,Y){1&r&&(t.TgZ(0,"div"),t._UZ(1,"i",9),t.qZA())}const y=function(r){return{disabled:r}},E=[{path:"",component:v.t,children:[{path:"index",component:x,title:"P\xe1gina Principal"},{path:"create",component:g,title:"Crear Rol"},{path:"edit/:id",component:g,title:"Editar Rol"},{path:"show/:id",component:(()=>{class r{constructor(e,o,i,c){this.activatedRoute=e,this.as=o,this.roleService=i,this.router=c,this.loaded=!1}ngOnInit(){this.activatedRoute.params.pipe((0,f.w)(({id:e})=>this.roleService.show(e))).subscribe({next:e=>{this.role=e,this.loaded=!0},error:e=>this.as.subscriptionAlert(s.fI.ERROR,s.gW.ERROR,e.message)})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(l.gz),t.Y36(s.c9),t.Y36(m.N),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["role-show"]],decls:15,vars:6,consts:[[1,"row"],[1,"col"],[1,"btn-group","float-end","mt-5","mb-5"],["backButton","",1,"btn","btn-outline-secondary"],["aria-current","page",1,"btn","btn-warning",3,"routerLink","ngClass"],[1,"row","px-5"],[1,"col-xs-12","col-md-4","d-flex","flex-column","my-2"],[4,"ngIf"],[1,"form-text"],[1,"fa-solid","fa-spinner","fa-spin","fa-xs"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t._uU(4,"Volver"),t.qZA(),t.TgZ(5,"a",4),t._uU(6,"Editar"),t.qZA()()()(),t.TgZ(7,"div",0)(8,"div",1)(9,"div",5)(10,"div",6),t.YNc(11,Z,2,0,"div",7),t._uU(12),t.TgZ(13,"span",8),t._uU(14,"Nombre"),t.qZA()()()()()),2&o&&(t.xp6(5),t.MGl("routerLink","/role/edit/",null==i.role?null:i.role.id,""),t.Q6J("ngClass",t.VKq(4,y,!i.loaded)),t.xp6(6),t.Q6J("ngIf",!i.loaded),t.xp6(1),t.hij(" ",null==i.role?null:i.role.name," "))},dependencies:[d.mk,d.O5,l.rH,S.z],encapsulation:2})}return r})(),title:"Ver Rol"},{path:"**",redirectTo:"index"}]}];let T=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(E),l.Bz]})}return r})();var I=n(6208),F=n(3162);let U=(()=>{class r{static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275mod=t.oAB({type:r});static#r=this.\u0275inj=t.cJS({imports:[d.ez,p.T,F.W,T,a.UX,I.m]})}return r})()}}]);